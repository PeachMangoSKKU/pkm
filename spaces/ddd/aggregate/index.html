<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Shihyu's personal knowledge management"><title>Shihyu's PKM</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=../../../icon.png><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Sans+Pro:wght@400;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><style>:root{--light:#faf8f8;--dark:#141021;--secondary:#284b63;--tertiary:#84a59d;--visited:#afbfc9;--primary:#f28482;--gray:#4e4e4e;--lightgray:#f0f0f0;--outlinegray:#dadada}[saved-theme=dark]{--light:#1e1e21 !important;--dark:#fbfffe !important;--secondary:#5b778a !important;--visited:#4a575e !important;--tertiary:#84a59d !important;--primary:#f58382 !important;--gray:#d4d4d4 !important;--lightgray:#292633 !important;--outlinegray:#343434 !important}</style><style>:root{--lt-colours-light:var(--light) !important;--lt-colours-lightgray:var(--lightgray) !important;--lt-colours-dark:var(--secondary) !important;--lt-colours-secondary:var(--tertiary) !important;--lt-colours-gray:var(--outlinegray) !important}h1,h2,h3,h4,ol,ul,thead{font-family:Inter;color:var(--dark);font-weight:revert;margin:revert;padding:revert}p,ul,text{font-family:source sans pro,sans-serif;color:var(--gray);fill:var(--gray);font-weight:revert;margin:revert;padding:revert}a{font-family:Inter;font-weight:700;font-size:1em;text-decoration:none;transition:all .2s ease;color:var(--secondary)}a:hover{color:var(--tertiary)!important}#TableOfContents>ol{counter-reset:section;margin-left:0;padding-left:1.5em}#TableOfContents>ol>li{counter-increment:section}#TableOfContents>ol>li>ol{counter-reset:subsection}#TableOfContents>ol>li>ol>li{counter-increment:subsection}#TableOfContents>ol>li>ol>li::marker{content:counter(section)"." counter(subsection)"  "}#TableOfContents>ol>li::marker{content:counter(section)"  "}#TableOfContents>ol>li::marker,#TableOfContents>ol>li>ol>li::marker{font-family:Source Sans Pro;font-weight:700}footer{margin-top:4em;text-align:center}table{width:100%}img{width:100%;border-radius:3px;margin:1em 0}p>img+em{display:block;transform:translateY(-1em)}sup{line-height:0}p,tbody,li{font-family:Source Sans Pro;color:var(--gray);line-height:1.5em}h2{opacity:.85}h3{opacity:.75}blockquote{margin-left:0;border-left:3px solid var(--secondary);padding-left:1em;transition:border-color .2s ease}blockquote:hover{border-color:var(--tertiary)}table{padding:1.5em}td,th{padding:.1em .5em}.footnotes p{margin:.5em 0}article a{font-family:Source Sans Pro;font-weight:600;text-decoration:underline;text-decoration-color:var(--tertiary);text-decoration-thickness:.15em}sup>a{text-decoration:none;padding:0 .1em 0 .2em}pre{font-family:fira code;padding:.75em;border-radius:3px;overflow-x:scroll}code{font-family:fira code;font-size:.85em;padding:.15em .3em;border-radius:5px;background:var(--lightgray)}html{scroll-behavior:smooth}body{margin:0;height:100vh;width:100vw;overflow-x:hidden;background-color:var(--light)}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}footer{margin-top:4em}footer>a{font-size:1em;color:var(--secondary);padding:0 .5em 3em}hr{width:25%;margin:4em auto;height:2px;border-radius:1px;border-width:0;color:var(--dark);background-color:var(--dark)}a[href^="/"]{text-decoration:none;background-color:#afbfc922;padding:0 .2em;border-radius:3px}.singlePage{margin:4em 30vw}@media all and (max-width:1200px){.singlePage{margin:25px 5vw}}.page-end{display:flex;flex-direction:row}@media all and (max-width:780px){.page-end{flex-direction:column}}.page-end>*{flex:1 0}.page-end>.backlinks-container>ul{list-style:none;padding-left:0;margin-right:2em}.page-end>.backlinks-container>ul>li{margin:.5em 0;padding:.25em 1em;border:var(--outlinegray)1px solid;border-radius:5px}.page-end #graph-container{border:var(--outlinegray)1px solid;border-radius:5px}.centered{margin-top:30vh}header{display:flex;flex-direction:row;align-items:center}header>h1{font-size:2em}@media all and (max-width:600px){header>nav{display:none}}header>.spacer{flex:auto}header>svg{cursor:pointer;width:18px;min-width:18px;margin:0 1em}header>svg:hover .search-path{stroke:var(--tertiary)}header>svg .search-path{stroke:var(--gray);stroke-width:2px;transition:stroke .5s ease}#search-container{position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100%;overflow:scroll;display:none;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}#search-container>div{width:50%;margin-top:15vh;margin-left:auto;margin-right:auto}@media all and (max-width:1200px){#search-container>div{width:90%}}#search-container>div>*{width:100%;border-radius:4px;background:var(--light);box-shadow:0 14px 50px rgba(27,33,48,.12),0 10px 30px rgba(27,33,48,.16);margin-bottom:2em}#search-container>div>input{box-sizing:border-box;padding:.5em 1em;font-family:Inter,sans-serif;color:var(--dark);font-size:1.1em;border:1px solid var(--outlinegray)}#search-container>div>input:focus{outline:none}#search-container>div>#results-container>.result-card{padding:1em;cursor:pointer;transition:background .2s ease;border:1px solid var(--outlinegray);border-bottom:none;font-family:inherit;font-size:100%;line-height:1.15;margin:0;overflow:visible;text-transform:none;text-align:left;background:var(--light);outline:none}#search-container>div>#results-container>.result-card:hover,#search-container>div>#results-container>.result-card:focus{background:rgba(180,180,180,.15)}#search-container>div>#results-container>.result-card:first-of-type{border-top-left-radius:5px;border-top-right-radius:5px}#search-container>div>#results-container>.result-card:last-of-type{border-bottom-left-radius:5px;border-bottom-right-radius:5px;border-bottom:1px solid var(--outlinegray)}#search-container>div>#results-container>.result-card>h3,#search-container>div>#results-container>.result-card>p{margin:0}#search-container>div>#results-container>.result-card .search-highlight{background-color:#afbfc966;padding:.05em .2em;border-radius:3px}</style><style>.darkmode{float:right;padding:1em;min-width:30px;position:relative}@media all and (max-width:450px){.darkmode{padding:1em}}.darkmode>.toggle{display:none;box-sizing:border-box}.darkmode svg{opacity:0;position:absolute;width:20px;height:20px;top:calc(50% - 10px);margin:0 7px;fill:var(--gray);transition:opacity .1s ease}.toggle:checked~label>#dayIcon{opacity:0}.toggle:checked~label>#nightIcon{opacity:1}.toggle:not(:checked)~label>#dayIcon{opacity:1}.toggle:not(:checked)~label>#nightIcon{opacity:0}</style><style>.chroma{color:#f8f8f2;background-color:#282a36}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.chroma .hl{display:block;width:100%;background-color:#ffc}.chroma .lnt{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .k{color:#ff79c6}.chroma .kc{color:#ff79c6}.chroma .kd{color:#8be9fd;font-style:italic}.chroma .kn{color:#ff79c6}.chroma .kp{color:#ff79c6}.chroma .kr{color:#ff79c6}.chroma .kt{color:#8be9fd}.chroma .na{color:#50fa7b}.chroma .nb{color:#8be9fd;font-style:italic}.chroma .nc{color:#50fa7b}.chroma .nf{color:#50fa7b}.chroma .nl{color:#8be9fd;font-style:italic}.chroma .nt{color:#ff79c6}.chroma .nv{color:#8be9fd;font-style:italic}.chroma .vc{color:#8be9fd;font-style:italic}.chroma .vg{color:#8be9fd;font-style:italic}.chroma .vi{color:#8be9fd;font-style:italic}.chroma .s{color:#f1fa8c}.chroma .sa{color:#f1fa8c}.chroma .sb{color:#f1fa8c}.chroma .sc{color:#f1fa8c}.chroma .dl{color:#f1fa8c}.chroma .sd{color:#f1fa8c}.chroma .s2{color:#f1fa8c}.chroma .se{color:#f1fa8c}.chroma .sh{color:#f1fa8c}.chroma .si{color:#f1fa8c}.chroma .sx{color:#f1fa8c}.chroma .sr{color:#f1fa8c}.chroma .s1{color:#f1fa8c}.chroma .ss{color:#f1fa8c}.chroma .m{color:#bd93f9}.chroma .mb{color:#bd93f9}.chroma .mf{color:#bd93f9}.chroma .mh{color:#bd93f9}.chroma .mi{color:#bd93f9}.chroma .il{color:#bd93f9}.chroma .mo{color:#bd93f9}.chroma .o{color:#ff79c6}.chroma .ow{color:#ff79c6}.chroma .c{color:#6272a4}.chroma .ch{color:#6272a4}.chroma .cm{color:#6272a4}.chroma .c1{color:#6272a4}.chroma .cs{color:#6272a4}.chroma .cp{color:#ff79c6}.chroma .cpf{color:#ff79c6}.chroma .gd{color:#8b080b}.chroma .ge{text-decoration:underline}.chroma .gh{font-weight:700}.chroma .gi{font-weight:700}.chroma .go{color:#44475a}.chroma .gu{font-weight:700}.chroma .gl{text-decoration:underline}.lntd:first-of-type>.chroma{padding-right:0}.chroma code{font-family:fira code!important;font-size:.85em;line-height:1em;background:0 0;padding:0}.chroma{border-radius:3px;margin:0}</style><script>const userPref=window.matchMedia('(prefers-color-scheme: light)').matches?'light':'dark',currentTheme=localStorage.getItem('theme')??userPref;currentTheme&&document.documentElement.setAttribute('saved-theme',currentTheme);const switchTheme=a=>{a.target.checked?(document.documentElement.setAttribute('saved-theme','dark'),localStorage.setItem('theme','dark')):(document.documentElement.setAttribute('saved-theme','light'),localStorage.setItem('theme','light'))};window.addEventListener('DOMContentLoaded',()=>{const a=document.querySelector('#darkmode-toggle');a.addEventListener('change',switchTheme,!1),currentTheme==='dark'&&(a.checked=!0)})</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/gh/nextapps-de/flexsearch@0.7.2/dist/flexsearch.bundle.js></script><script>const removeMarkdown=(c,b={listUnicodeChar:!1,stripListLeaders:!0,gfm:!0,useImgAltText:!1,preserveLinks:!1})=>{let a=c||"";a=a.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm,"");try{b.stripListLeaders&&(b.listUnicodeChar?a=a.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,b.listUnicodeChar+" $1"):a=a.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,"$1")),b.gfm&&(a=a.replace(/\n={2,}/g,"\n").replace(/~{3}.*\n/g,"").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),b.preserveLinks&&(a=a.replace(/\[(.*?)\][\[\(](.*?)[\]\)]/g,"$1 ($2)")),a=a.replace(/<[^>]*>/g,"").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g,b.useImgAltText?"$1":"").replace(/\[(.*?)\][\[\(].*?[\]\)]/g,"$1").replace(/^\s{0,3}>\s?/g,"").replace(/(^|\n)\s{0,3}>\s?/g,"\n\n").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm,"$1$2$3").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/\n{2,}/g,"\n\n")}catch(a){return console.error(a),c}return a}</script><script>const contentIndex=new FlexSearch.Document({cache:!0,charset:"latin:extra",optimize:!0,worker:!0,document:{index:[{field:"content",tokenize:"strict",context:{resolution:5,depth:3,bidirectional:!0},suggest:!0},{field:"title",tokenize:"forward"}]}}),scrapedContent={"/":{content:"# ğŸŒ± Shihyu's PKM\n\n## Hi there ğŸ‘‹\n\nI'm Shihyu! I'm a Java Programmer in Taiwan - ğŸ‡¹ğŸ‡¼.\n\n- âœ‰ï¸ Mail - [methodho@gmail.com](mailto:methodho@gmail.com) \n- ğŸ‘¤ GitHub - [https://github.com/shihyuho/](https://github.com/shihyuho/)\n\n## Get Started\n\nğŸ‘‰ Let's [enter the forest](+home.md).\n",title:"Untitled Page"},"/+home":{content:"## Main Maps\n\n- [Umani MOC](moc/umani-moc.md)\n- [DDD MOC](moc/ddd-moc.md)\n- [Event Sourcing MOC](moc/event-sourcing-moc.md)\n- [Kubernetes MOC](moc/kubernetes-moc.md)\n- [Spring MOC](moc/spring-moc.md)\n## Private Stuff\n\n[Projects MOC](private/projects/projects-moc.md)\n\n\u003e Private pages doesn't get published!",title:"Home"},"/moc/ddd-moc":{content:"# DDD MOC\n\n- [Strategic Design](spaces/ddd/strategic-design.md)\n- [Tactical Design](spaces/ddd/tactical-design.md)",title:"Untitled Page"},"/moc/event-sourcing-moc":{content:"# Event Sourcing MOC\n\nEvent Sourcing ä¸€å®šä¾†è‡ªæ–¼ [DDD](moc/ddd-moc.md), ç°¡å–®ä¾†èªª:\n\n- Start with your [Domain](spaces/ddd/domain-modeling.md)\n- Find the [Bounded Context](spaces/ddd/bounded-context.md)\n- Find the Important Concepts\n- Find the Dynamics in your Business Language\n\n## Topics\n- [General Understanding](spaces/event-sourcing/general-understanding.md)\n- [You may NOT need a read model](spaces/event-sourcing/you-may-not-need-a-read-model.md)\n- [Guarantee Correctness when writing](spaces/event-sourcing/guarantee-correctness-when-writing.md)\n- [Handle Versioning](spaces/event-sourcing/handle-versioning.md)\n- [Create a Snapshot of the Stream](spaces/event-sourcing/create-a-snapshot-of-the-stream.md)\n- [Re-Model Domain](spaces/event-sourcing/remodel-domain.md)\n- [Dealing with Errors](spaces/event-sourcing/dealing-with-errors.md)\n## Reference\n\nç‰¹åˆ¥æ„Ÿè¬ä»¥ä¸‹æ‰€æœ‰ Link, æœ¬ MOC ä¸­çš„å…§å®¹éƒ½æ˜¯å¾å…¶ä¸­æ‰€ç¯€éŒ„å‡ºä¾†, å†åŠ ä¸Šå°‘éƒ¨åˆ†è‡ªå·±çš„å¿ƒå¾—æ•´ç†è€Œæˆ\n\n- [Event Sourcing You are doing it wrong by David Schmitz](https://www.youtube.com/watch?v=GzrZworHpIk)\n- [Q\u0026A: Messaging, CQRS \u0026 Event Sourcing!](https://www.youtube.com/watch?v=05i9eyWl9Mk)",title:"Untitled Page"},"/moc/kubernetes-moc":{content:"# Kubernetes MOC\n\n- [Assigning Pods](spaces/kubernetes/assigning-pods.md)",title:"Untitled Page"},"/moc/showcase":{content:"Want to see what Quartz can do? Here are some cool community gardens :)\n\n- [Quartz Documentation (this site!)](https://quartz.jzhao.xyz/)\n- [Strengthening Online Social Bonds: Research Garden](https://communities.digital/)\n- [Jacky Zhao's Garden](https://garden.jzhao.xyz/)\n- [Anson Yu's Garden](http://garden.ansonyu.me/)\n- [Shihyu's PKM](https://shihyuho.github.io/pkm/)\n- [Chloe's Garden](https://garden.chloeabrasada.online/)\n- [SlRvb's Site](https://slrvb.github.io/Site/)\n- [Course notes for Information Technology Advanced Theory](https://a2itnotes.github.io/quartz/)\n\nIf you want to see your own on here, submit a [Pull Request adding yourself to this file](https://github.com/jackyzha0/quartz/blob/hugo/content/moc/showcase.md)!",title:"Showcase"},"/moc/spring-moc":{content:"# Spring MOC\n\n- [Externalized Configuration](spaces/spring/externalized-configuration.md)",title:"Untitled Page"},"/moc/umani-moc":{content:'# Umani MOC\n\n\u003e  "Umami" are: Sweetness, Sourness, Saltiness, Bitterness, and that oddball Umami. It\'s a mixture of insights and ideas, concepts and connections, all mingling together to create that mysterious full mouthfeel that magnificently completes any meal for the mind.\n\n\n- [Rime Input Method Engine](spaces/umani/Rime-Input-Method-Engine.md)\n- [Change Data Capture](spaces/umani/cdc.md)\n- [[spaces/umani/keeping-your-fork-update-to-date]]',title:"Untitled Page"},"/notes/hosting":{content:"---\n\n## GitHub Pages\nQuartz is designed to be effortless to deploy. If you forked and cloned Quartz directly from the repository, everything should already be good to go! You can head to `\u003cYOUR-GITHUB-USERNAME.github.io/quartz` to see it live.\n\n### Enable GitHub Actions\nBy default, GitHub disables workflows from running automatically on Forked Repostories. Head to the 'Actions' tab of your forked repository and Enable Workflows to setup deploying your Quartz site!\n\n![Enable GitHub Actions](/notes/images/github-actions.png)*Enable GitHub Actions*\n\n### Enable GitHub Pages\n\nHead to the 'Settings' tab of your forked repository and go to the 'Pages' tab.\n\n1. Set the source to deploy from `master` using `/ (root)`\n2. Set a custom domain here if you have one!\n\n![Enable GitHub Pages](/notes/images/github-pages.png)*Enable GitHub Pages*\n\n### Pushing Changes\nTo see your changes on the internet, we need to push it them to GitHub. Quartz is essentially a `git` repository so updating it is the same workflow as you would follow as normal.\n\n```shell\n# Navigate to Quartz folder\ncd \u003cpath-to-quartz\u003e\n\n# Commit all changes\ngit add .\ngit commit -m \"message describing changes\"\n\n# Push to GitHub to update site\ngit push origin hugo\n```\n\n### Setting up the Site\nNow let's get this site up and running. Never hosted a site before? No problem. Have a fancy custom domain you already own or want to subdomain your Quartz? That's easy too.\n\nHere, we take advantage of GitHub's free page hosting to deploy our site. Change `baseURL` in `/config.toml`. If you don't have a custom domain to use, you can use `\u003cYOUR-USERNAME\u003e.github.io` (which GitHub gives to you for free!) as your domain.\n\n[Reference.](https://github.com/jackyzha0/quartz/blob/hugo/config.toml)\n\n```toml\nbaseURL = \"https://\u003cYOUR-DOMAIN\u003e/\"\n```\n\nChange `cname` in `/.github/workflows/deploy.yaml`. Again, if you don't have a custom domain to use, you can use `\u003cYOUR-USERNAME\u003e.github.io`.\n\n[Reference.](https://github.com/jackyzha0/quartz/blob/hugo/.github/workflows/deploy.yaml)\n\n```yaml\n- name: Deploy  \n  uses: peaceiris/actions-gh-pages@v3  \n  with:  \n	github_token: ${{ secrets.GITHUB_TOKEN }} # this can stay as is, GitHub fills this in for us!\n	publish_dir: ./public  \n	publish_branch: master\n	cname: \u003cYOUR-DOMAIN\u003e\n```\n\n### Registrar\nThis step is only applicable if you are using a **custom domain**! If you are using `\u003cYOUR-USERNAME\u003e.github.io`, you can skip this step.\n\nFor this last bit to take effect, you also need to create a CNAME record with the DNS provider you register your domain with (i.e. NameCheap, Google Domains).\n\nGitHub has some [documentation on this](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site), but the tldr; is to\n\n1. Go to your forked repository (`github.com/\u003cYOUR-GITHUB-USERNAME\u003e/quartz`) settings page and go to the Pages tab. Under \"Custom domain\", type your custom domain, then click **Save**.\n2. Go to your DNS Provider and create a CNAME record that points from your domain to `\u003cYOUR-GITHUB-USERNAME.github.io.` (yes, with the trailing period).\n\n	![Example Configuration for Quartz](/notes/images/google-domains.png)*Example Configuration for Quartz*\n3. Wait 30 minutes to an hour for the network changes to kick in.\n4. Done!\n\n## External Hosting\nDon't want to use GitHub Pages? Hugo builds everything for you! Everything is a packaged set of static files ready to deploy in `/public`. You can then upload this folder to a cloud provider to deploy. Alternatively, most providers also give users the option to link a GitHub repository and a folder to deploy. When doing this, ensure you select `/public` folder under the `master` branch.",title:"Deploying Quartz to the Web"},"/notes/ignore-notes":{content:'---\n\n### Quartz Ignore\nEdit `ignoreFiles` in `config.toml` to include paths you\'d like to exclude from being rendered.\n\n```toml\n...\nignoreFiles = [  \n    "/content/templates/*",  \n    "/content/private/*", \n    "\u003cyour path here\u003e"\n]\n```\n\n`ignoreFiles` supports the use of Regular Expressions (RegEx) so you can ignore patterns as well (e.g. ignoring all `.png`s by doing `\\\\.png$`).\nTo ignore a specific file, you can also add the tag `draft: true` to the frontmatter of a note.\n\n```markdown',title:"Ignoring Notes"},"/notes/philosophy":{content:"\u003e â€œ[One] who works with the door open gets all kinds of interruptions, but [they] also occasionally gets clues as to what the world is and what might be important.â€ â€” Richard Hamming\n\n## Why Quartz?\nHosting a public digital garden isn't easy. There are an overwhelming number of tutorials, resources, and guides for tools like [Notion](https://www.notion.so/), [Roam](https://roamresearch.com/), and [Obsidian](https://obsidian.md/), yet none of them have super easy to use *free* tools to publish that garden to the world.\n\nI've personally found that\n1. It's nice to access notes from anywhere\n2. Having a public digital garden invites open conversations\n3. It makes keeping personal notes and knowledge *playful and fun*\n\nI was really inspired by [Bianca](https://garden.bianca.digital/) and [Joel](https://joelhooks.com/digital-garden)'s digital gardens and wanted to try making my own.\n\n**The goal of Quartz is to make hosting your own public digital garden free and simple.** You don't even need your own website. Quartz does all of that for you and gives your own little corner of the internet.",title:"Quartz Philosophy"},"/notes/preview-changes":{content:"If you'd like to preview what your Quartz site looks like before deploying it to the internet, here's exactly how to do that!\n\n## Install `hugo-obsidian`\nThis step will generate the list of backlinks for Hugo to parse. Ensure you have [Go](https://golang.org/doc/install) (\u003e= 1.16) installed.\n\n```shell\n# Install and link `hugo-obsidian` locally\n$ go install github.com/jackyzha0/hugo-obsidian\n\n# Navigate to your local Quartz folder\n$ cd \u003clocation-of-your-local-quartz\u003e\n\n# Scrape all links in your Quartz folder and generate info for Quartz\n$ hugo-obsidian -input=content -output=data -index=true\n```\n\nAfterwards, start the Hugo server as shown above and your local backlinks and interactive graph should be populated!\n\n##  Installing Hugo\nHugo is the static site generator that powers Quartz. If you'd like to preview your site locally, [install Hugo](https://gohugo.io/getting-started/installing/).\n\n```\n# Navigate to your local Quartz folder\n$ cd \u003clocation-of-your-local-quartz\u003e\n\n# Start local server\n$ hugo server\n\n# View your site in a browser at http://localhost:1313/\n```",title:"Preview Changes"},"/notes/troubleshooting":{content:"## Common Pitfalls\n### Can I publish only a subset of my pages?\nYes! Quartz makes selective publishing really easy. Heres a guide on [excluding pages from being published](notes/ignore-notes.md).\n\n### Can I host this myself and not on GitHub Pages?\nYes! All built files can be found under `/public` in the `master` branch. More details under [hosting](notes/hosting.md).\n\n### Do I need a website already?\nNo! Setting up Quartz means you set up a site too :)\n\n### `command not found: hugo-obsidian`\nMake sure you set your `GOPATH` correctly! This will allow your terminal to correctly recognize `hugo-obsidian` as an executable.\n\n```shell\n# Add the following 2 lines to your ~/.bash_profile\nexport GOPATH=/Users/$USER/go\nexport PATH=$GOPATH/bin:$PATH\n\n# In your current terminal, to reload the session\nsource ~/.bash_profile\n```\n\n### How come my notes aren't being rendered?\nYou probably forgot to include front matter in your Markdown files. You can either setup [Obsidian](notes/obsidian) to do this for you or you need to manually define it. More details in [the 'how to edit' guide](notes/editing.md).\n\n### My custom domain isn't working!\nWalk through the steps in [the hosting guide](notes/hosting.md) again. Make sure you wait 30 min to 1 hour for changes to take effect.\n\n### How do I setup Google Analytics?\nYou can edit it in `config.toml` and either use a V3 (UA-) or V4 (G-) tag.\n\n### How do I change the content on the home page?\nTo edit the main home page, open `/content/_index.md`.\n\n### How do I change the colours?\nYou can change the theme by editing `assets/custom.scss`. More details on customization and themeing can be found in the [customization guide](notes/config.md).\n\n### How do I add images?\nYou can put images anywhere in the `/content` folder. The only caveat is that you should reference them in your Markdown by prefixing it with a `/`.\n\n```markdown\nExample image (source is in content/notes/images/example.png)\n![Example Image](/content/notes/images/example.png)\n```\n\n### My Interactive Graph and Backlinks aren't up to date\nBy default, the `linkIndex.yaml` (which Quartz needs to generate the Interactive Graph and Backlinks) are not regenerated locally. To set that up, see the guide on [local editing](notes/editing.md)\n\n### Can I use React/Vue/some other framework?\nNot out of the box. You could probably make it work by editing `/layouts/_default/single.html` but that's not what Quartz is designed to work with. 99% of things you are trying to do with those frameworks you can accomplish perfectly fine using just vanilla HTML/CSS/JS.\n\n## Still Stuck?\nQuartz isn't perfect! If you're still having troubles, file an issue in the GitHub repo with as much information as you can reasonably provide. Alternatively, you can message me on [Twitter](https://twitter.com/_jzhao) and I'll try to get back to you as soon as I can.\n\nğŸ› [Submit an Issue](https://github.com/jackyzha0/quartz/issues)",title:"Troubleshooting and FAQ"},"/spaces/+incubation/":{content:"# Incubation\n\nItems not yet ready for planting in need of planting.",title:"Untitled Page"},"/spaces/ddd/aggregate":{content:"# Aggregate\n\n- åŒ…å«äº† Entities è·Ÿ ValueObject\n- è² è²¬æ‰€æœ‰ Entites è·Ÿ ValueObject çš„ [Invariants](spaces/ddd/invariants.md)\n- Aggregate å³ Transaction Boundary, \n- å»ºè­°ä¸€å€‹ Aggregate æ‡‰è©²åªå°æ‡‰ä¸€å€‹ [Repository](spaces/ddd/repository.md), ä¸¦åœ¨è©² Repository ç¶ä¸Š Transaction\n- ä½¿ç”¨åè©, ä¸è¦å‡ºç¾å‹•è©\n- é¿å…ä½¿ç”¨ä¸ç²¾ç¢ºçš„åè©\n\n ## Interaction with other aggregate \n å¦‚æœæ˜¯è¦å”èª¿èª¿åº¦å…©å€‹ä¸åŒçš„èšåˆçš„æƒ…æ³ä¸‹ï¼Œä¸€èˆ¬æˆ‘å€‘æœƒè€ƒæ…®æ˜¯ä»¥ Application Service ä¾†è™•ç†ï¼Œæˆ–è€…æ˜¯é€šéæ´¾ç™¼é ˜åŸŸäº‹ä»¶å»è·Ÿå¦ä¸€å€‹èšåˆåšäº¤äº’ï¼Œ domain service é‚„æ˜¯æ¯”è¼ƒéš¸å±¬æ–¼è©²èšåˆç›¸é—œçš„æ¥­å‹™è©±é¡Œçš„äº‹ç‰©å±…å¤šã€‚\n\n \n ## Aggregate Root\n \næŒ‘é¸ Aggregate ä¸­çš„å…¶ä¸­ä¸€å€‹ Entity æœ€ç‚º Root (æ ¹), åªæœ‰ Aggregate Root æŒæœ‰æ•´é«”çš„é ˜åŸŸäº‹ä»¶ (Domain Event)ï¼Œä¸¦ä¸”æ±ºå®šä½•æ™‚ç™¼å‡ºå»ã€‚\n\n\u003e ä¸€å€‹ Aggregate Rootæ“æœ‰ domain event list å°±å¥½åƒæ˜¯ä¸€å€‹æ±½è»Šä¿®ç†å“¡éš¨èº«æ”œå¸¶èºçµ²èµ·å­ä¸€æ¨£æ˜¯å¾ˆè‡ªç„¶çš„äº‹æƒ…",title:"Untitled Page"},"/spaces/ddd/bounded-context":{content:"# Bounded Context\n- ç›¡å¯èƒ½çš„å…·è±¡åŒ–\n- ç­‰æ–¼æ˜¯ Aggregate çš„ç¾¤çµ„\n\n## Dealing with Relationships\n\næ‰¾å‡ºå„å€‹ Bounded Context çš„ä¸Šä¸‹æ–‡\n- **U**: Upstream ä¸Šæ–‡\n- **D**: Downstream ä¸‹æ–‡\n\nå¦‚æœæ‰¾åˆ°ä¸Šä¸‹æ–‡ä¹‹é–“æœ‰ cycle é—œä¿‚, ä»£è¡¨é€™äº›åƒèˆ‡ cycle çš„ bounded context çš„é—œä¿‚æœ‰å•é¡Œ, æœ‰å¯èƒ½å…¶å¯¦æ˜¯åŒä¸€å€‹",title:"Untitled Page"},"/spaces/ddd/bridge-pattern":{content:"# Bridge Pattern\n\næ©‹æ¥æ¨¡å¼æœ€ä¸»è¦å°±æ˜¯å°‡ä½ çš„ç‰©ä»¶åˆ‡åˆ†æˆæ¦‚å¿µèˆ‡è¡Œç‚º(æ®¼èˆ‡è‚‰)ï¼Œé”åˆ°æ¥µè‡´çš„è§£å¶ç¨ç«‹ï¼Œä¾‹å¦‚ï¼Œé™æ§å™¨ä»–åªæ˜¯ä¸€å€‹å¡‘è† æ®¼(æ¦‚å¿µ)æ­é…ä¸€å€‹é›»å­é›»è·¯ç‰ˆ(è¡Œç‚º)ï¼Œå¦‚æœæˆ‘å°‡é›»å­é›»è·¯ç‰ˆåšæˆé€šç”¨ï¼Œä»¥å¾Œé™æ§å™¨çš„æ®¼å¯ä»¥è·Ÿéš¨å¸‚å ´ä¸Šæµè¡Œçš„æ¿å¼ç›´æ¥ä½¿ç”¨æˆ‘çš„é›»å­é›»è·¯ç‰ˆã€‚\n\n# Class Diagram\n\nAbstraction: å°‡åŸæœ¬çš„ä¸»é«”æŠ½æ›åˆ°åªå‰©ä¸‹è™›æ“¬çš„æ¦‚å¿µï¼Œä¾‹å¦‚(äººé¡:åªæ˜¯åƒå–æ‹‰æ’’ç¡çš„ä¸»é«”ã€é™æ§å™¨:åªæ˜¯é–‹æ©Ÿé—œæ©Ÿèª¿æ•´çš„ä¸»é«”)\n\n## Class Diagram\n\n**RefineAbstraction:** æ ¹æ“šä¸åŒçš„éœ€æ±‚å¯¦ä½œä¸»é«”\n\n**Implementator:** å°‡åŸæœ¬ä¸»é«”çš„å¯¦éš›åŠŸèƒ½æŠ½é›¢ï¼Œæˆç‚ºé€™å€‹çš„Hierarchy(ç¹¼æ‰¿çµæ§‹)ï¼Œä¾‹å¦‚(äººé¡:äººé¡çš„åƒå’Œæ‹‰æ’’ç¡æ‹‰å‡ºåœ¨æ­¤çµæ§‹å¯¦ä½œ)\n\n**ConcreteImplementator:** æ ¹æ“šä¸åŒçš„éœ€æ±‚é–‹ç™¼çœŸå¯¦çš„è¡Œç‚º\n\n![[spaces/ddd/attachments/bridge-pattern.png]]\n\n## Example\n\nåœ¨ Application ä¸­æˆ‘å€‘å®šç¾© repository interface, ä¹Ÿå°±æ˜¯ Bridge Pattern çš„ **Abstraction**, å…¶ä¸­åªæœƒåˆ—å‡ºè©² aggregate ä¸­æœƒç”¨åˆ°çš„å‹•ä½œ\n\nä¾‹å¦‚åœ¨ Balance Aggregate ä¸­, æˆ‘å€‘æœƒä½¿ç”¨åˆ°:\n- **getCurrentBalance:** å–å¾—ç•¶å‰çš„é¤˜é¡\n- **save:** æ›´æ–°é¤˜é¡\n\n```java\npacakge example.application.balance.repository;\n\n@FunctionInterface\ninterface BalanceRepository {\n    Balance getCurrentBalance();\n    void save(Balance balance);\n}\n```\n\næ¥çš„åœ¨ Infrastructure package ä¸­å»å¯¦ä½œ Domain repository, ä¹Ÿå°±æ˜¯ Bridge Pattern çš„ **RefineAbstraction**, é€™é‚Šé€šå¸¸ä¹Ÿæ˜¯ç®¡ç† Transaction çš„åœ°æ–¹, è€Œä¸”é€™é‚Šä¹Ÿä¸ç›´æ¥æ“ä½œ Persistence framework (å¦‚ JPA), å–ä»£ä»£ä¹‹çš„æ˜¯å‚³å…¥ Dao\n\n```java\npacakge example.infrastructure.repository.balance;\n\n@Repository\n@RequiredArgsConstructor\npublic class BalanceRepositoryImpl implements BalanceRepository {\n\n    final BalanceDao dao;\n    final BalanceMapper mapper; // Mapper mapping between PO (persistant object) and DO (domain object)\n\n    @Transactional(readOnly = true)\n    @Override  \n    public Balance getCurrentBalance() {  \n        return mapper.mapping(dao.findTopByOrderByIdDesc());\n    }  \n    \n    @Transactional(rollbackFor = Exception.class)\n    @Override  \n    public void save(Balance balance) {  \n        dao.save(mapper.mapping(balance));  \n    }  \n}\n```\n\næœ€å¾Œå¯¦ä½œ Bridge Pattern çš„ **Implementator**, åœ¨ä¸‹é¢ç¯„ä¾‹ä¸­ä¹Ÿå°±æ˜¯ JPA çš„å¯¦ä½œ:\n\n```java\npacakge example.infrastructure.balance.jpa;\n\npublic interface BalanceDao extends JpaRepository\u003cBalancePO, Long\u003e {\n    BalancePO findTopByOrderByIdDesc();\n}\n```\n\nå¦‚æœæœªä¾†è¦æŠŠ JPA æ›æˆ Hibernate, ç”šè‡³ MongoDB, æˆ‘å€‘éƒ½åªéœ€è¦æ› **BalanceDao** å¯¦ä½œå³å¯",title:"Untitled Page"},"/spaces/ddd/command":{content:"# Command\n\né€šå¸¸æ˜¯ Event çš„å€’è£, ä¾‹å¦‚: Event æ˜¯**è²·äº†é‹å­**, Command å°±æ˜¯ **è²·é‹**\n\n## ä¾¿åˆ©è²¼é¡è‰²\n- ä½¿ç”¨è—è‰² \n",title:"Untitled Page"},"/spaces/ddd/domain-modeling":{content:"# Domain Modeling\n\n## Aggregate\n\nEvent Storming çš„ Aggregate å¯¦ä½œå¾Œæ¯”è¼ƒåƒ Domain Modeling çš„ç•Œç·š, é€šå¸¸æœƒå†åˆ†:\n- Aggregate Root\n- Entity\n- Value Object\n\n## Aggregate Root\n\nå¯ä»¥å¾ç”Ÿå‘½é€±æœŸä¾†çœ‹, ç•¶æŸä¸€ä»¶äº‹åœ¨æŸå€‹æ™‚é–“é»çµæŸæ™‚, ç›¸é—œçš„è³‡æ–™ä¹Ÿæœƒè·Ÿçš„æ¶ˆå¤±, å°±æ¨£å°±é©åˆç•¶æˆ Root\n\nåœ¨ Root ä¸­å¯ä»¥å¾ `public getter`, `private setter` é–‹å§‹è¨­è¨ˆ\n\n## æ€éº¼æ‰¾å‡º VO æˆ– Entity\n\nå…ˆåœ¨ Event Storming çš„ Aggregate ä¸­, è©¦è‘—æ‰¾åˆ°æ‰€æœ‰ç›¸é—œçš„åè©, ä½¿ç”¨ç´«è‰²ä¾¿æ¢ç´™, é€™å¯ä»¥æ˜¯å¾ˆç´°ç¯€\n\nåœ¨é€™äº›ç´«è‰²ä¾¿æ¢ç´™ä¸­, ä¾åºå¾€ä¸‹å€åˆ†\n\n### Value Object\n\nDescriptive aspect of domain, æ˜¯ä¸€ç¨®æè¿°, è‚šé‡ domain çš„æ€§è³ª\n\n- Immutable value\n- Non-identical life cycle concept\n\n### Entity\n\n- åœ¨ Value Object ä¸­, æœ‰ç‹€æ…‹, ç”Ÿå‘½é€±æœŸçš„, æ”¹æˆå®šç¾©ç‚º Entity\n- å®šç¾© Entity Id, Id åŸºæœ¬ä¸Šä¹Ÿæ˜¯ Value Object, å°±ç®—åªæœ‰ä¸€å€‹æ¬„ä½ä¹Ÿæ˜¯é€™æ¨£å»ºè­°\n\n#### Entity ID\n å¯ä»¥æ˜¯ä»¥ä¸‹æ–¹å¼:\n - User Input\n - Programing",title:"Untitled Page"},"/spaces/ddd/event":{content:"# Event\n\näº‹ä»¶ï¼Œä¹Ÿç¨±é ˜åŸŸäº‹ä»¶ï¼Œå³ä¸å¯æŠ¹æ»…çš„äº‹å¯¦, ä½¿ç”¨éå»å¼è¡¨é”\n\n## ä¾¿åˆ©è²¼é¡è‰²\n- ä½¿ç”¨æ©˜è‰²\n- æˆ–ä½¿ç”¨ç´«è‰²ä¾¿åˆ©è²¼, ç´«è‰²ä»£è¡¨ä¸€å€‹é•·æµç¨‹, ä¹Ÿå°±æ˜¯æ©˜è‰²çš„é›†åˆ\n\n## äº‹ä»¶æ•æ‰\n\né€é Event Storming æ‰¾å‡ºäº‹ä»¶, é—œéµæœ‰ï¼š\n- çµ±ä¸€èªè¨€ ubiquitous language\n- é™ç•Œä¸Šä¸‹æ–‡ bounded context\n\nå³åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¹‹é–“, è¬›ä¸åŒèªè¨€\n\n\u003e æ”¹ç³»çµ±ï¼Œä¸€å®šè¦æœ‰ business wish/value/goalï¼Œå¦å‰‡å¤±æ•—ç‡æ¥µé«˜\n",title:"Untitled Page"},"/spaces/ddd/example-mapping":{content:"# Example Mapping\n\n## Use Case\n\nåœ¨ Bounded Context ä¸­, è©¦è‘—æ‰¾å‡ºå¾ˆå¤š Use Case, ä½¿ç”¨é»ƒè‰²ä¾¿æ¢ç´™å¯«ä¸Š\n\n## Rule\n\nåœ¨é»ƒè‰²çš„ Use Case ä¸­, æ‰¾å‡ºå¾ˆå¤š Rule, ä½¿ç”¨è—è‰²çš„ä¾¿æ¢ç´™\n\n## Example\n\n- å¾ Rule ä¸­æ‰¾å‡ºç¯„ä¾‹, ä½¿ç”¨ç¶ è‰²ä¾¿æ¢ç´™\n- ç¯„ä¾‹æ‡‰è©²åŒ…å« Use Case çš„æ­£åå‘æµç¨‹ (æˆåŠŸ/å¤±æ•—)\n\n## Question\n\néç¨‹ä¸­æƒ³åˆ°ä»€éº¼å•é¡Œ, åˆ—æˆç´…è‰²çš„ä¾¿æ¢ç´™\n\n## å¸Œæœ›å¾—åˆ°\n\n- ç™¼ç¾ä¸¦æ“´å±•å•é¡ŒåŸŸ, ç”šè‡³æ‰¾åˆ°æ–°çš„ User Mapping\n- Acceptance Tests\n- Sharing Understanding\n\n## Gherkin\n\nhttps://cucumber.io/\n\n- **Given**: å‰ç½®æ¢ä»¶è¨­å®š \n- **When**: ç™¼ç”Ÿäº†ä¸€å€‹äº‹ä»¶, é€šå¸¸å¯ä»¥å°±æ˜¯ Command\n- **Then**: é æœŸçµæœ\n- **And**: å¤šå€‹ Given (å‰ç½®æ¢ä»¶) çš„ä¸²æ¥\n- **But**: å¤šå€‹ Then (é æœŸçµæœ) çš„ä¸²æ¥\n- **Examples**: å®šç¾©è®Šæ•¸\n\n",title:"Untitled Page"},"/spaces/ddd/invariants":{content:"# Invariants\n\nä¸è®Šé‡, ä¸¦ä¸æ˜¯åªä¸æœƒæ”¹è®Š, è€Œæ˜¯æŒ‡æ”¹è®Šçš„çµæœæ˜¯ç¬¦åˆç¨‹å¼è¨­è¨ˆçš„å‡è¨­èˆ‡å‰æ! åœ¨ DDD æ¶æ§‹ä¸­, [Aggregate](spaces/ddd/aggregate.md) éœ€è¦è² è²¬å…¶ä¸è®Šé‡\n\n## Enforcing Invariants with Aggregates\n\nç•¶æ¨¡å‹ä¸­çš„ç‰©ä»¶é—œä¿‚æœ‰è¤‡é›œé—œè¯æ™‚, æ˜¯å¾ˆé›£çš„å»ç¢ºä¿å…¶ä¸­éƒ¨åˆ†ç‰©ä»¶è®Šæ›´æ™‚æ•´é«”çš„ä¸€è‡´æ€§\n\n### Solution\n\næˆ‘å€‘å°‡ Entities è·Ÿ ValueObject èšåˆåœ¨ä¸€èµ·å½¢æˆ Aggregate ä¸¦å®šç¾© Aggregate çš„é‚Šç•Œã€‚é¸æ“‡ä¸€å€‹ Entity ä½œç‚º [Aggregate Root](spaces/ddd/aggregate.md#aggregate-root), ä¸¦ä¸”æˆ‘å€‘åªåœ¨ Aggregate Root ä¸­å»å­˜å– Aggregate é‚Šç•Œå…§çš„ç‰©ä»¶ã€‚\n\nå°å¤–æˆ‘å€‘ä¹Ÿåªé–‹æ”¾ Aggregate Root çš„å¼•ç”¨, ä»»ä½•å¤–éƒ¨éƒ½ä¸èƒ½ç¹é Aggregate Root ç›´æ¥çš„å°å…¶å…§éƒ¨ç‰©ä»¶ä¿®æ”¹, é€™ç¨®å®‰æ’å¯ä»¥ç¢ºä¿ä»»ä½•é‡å° Aggregate è£¡é¢çš„ç‰©ä»¶ä»¥åŠ Aggregate æœ¬èº«çš„ç‹€æ…‹ä¿®æ”¹éƒ½ä¸æœƒé•åä¸è®Šé‡ (Invariants)\n\n",title:"Untitled Page"},"/spaces/ddd/repository":{content:"# Repository\n\nä¸€å€‹ [[spaces/ddd/aggregate]] å°æ‡‰ä¸€å€‹ Repository\n\n## å…©ç¨®é¡å‹\n\nä¾æ“š DDD ç´…çš®æ›¸çš„åˆ†æï¼ŒRepositoryæœ‰å…©ç¨®ï¼š\n- Collection-like\n- CRUD-like\n    \nMartin Follower PoEAAæ›¸ä¸­çš„repositoryæ˜¯collection-likeï¼Œä½†ä¸€èˆ¬æˆ‘å€‘å¸¸ç”¨çš„æ˜¯CRUD-likeï¼Œéœ€è¦é¡å¤–å‘¼å«saveå„²å­˜aggregateã€‚æ‰€ä»¥ç•¶ä½ æ±ºå®šä½¿ç”¨Repository patternï¼Œä½ è¦æ±ºå®šä½¿ç”¨å“ªä¸€ç¨®é¢¨æ ¼çš„repositoryã€‚\n\n## çš„ç›®\n\nRepository çš„ç›®çš„æ˜¯è¦éš”é›¢é ˜åŸŸç‰©ä»¶(aggregate)èˆ‡è³‡æ–™åº«æ“ä½œã€‚\n\nå¾é ˜åŸŸç‰©ä»¶çš„è§’åº¦ä¾†çœ‹ ï¼Œæ ¹æœ¬ä¸éœ€è¦çŸ¥é“ Repository çš„å¯¦ä½œ, Ex: æœ‰å“ªäº›\nEntity? å°æ‡‰å¤šå°‘å€‹ Data Object?\n\n## Pattern\n\né€šå¸¸æ˜¯åˆ†æåˆ°æœ€å¾Œï¼Œæ‰éœ€è¦é—œå¿ƒRepositoryçš„å¯¦ä½œ, åœ¨ DDD åŠ ä¸Š Clean Architecture çš„æƒ…æ³ä¸‹, å¯¦ä½œå¥— [[spaces/ddd/bridge-pattern]] é€šå¸¸å°±æå®šäº†!\n\nRepository åŸæœ¬å°±æ˜¯ä¸€å€‹ä»‹é¢ï¼Œå°±ç®—ä½ é‡å°æŸå€‹å¯¦ä½œç‰ˆæœ¬ä¸æ»¿æ„ï¼Œä¸ç®¡æ˜¯æ•ˆèƒ½é‚„æ˜¯å…¶ä»–åŸå› ï¼Œæ› Repository çš„å¯¦ä½œå³å¯ã€‚\n\n\u003e ç•¶ç„¶æ²’äº‹ä¸æœƒå¸¸å¸¸æ›ï¼Œå› ç‚ºæ›æ‰ä¹‹å¾Œå¾Œç«¯çš„è³‡æ–™åº«å¯èƒ½éœ€è¦éš¨è‘—æ”¹è®Šã€‚å¦‚æœå·²ç¶“æœ‰productionçš„è³‡æ–™åœ¨ä¸Šé¢ï¼Œæœƒæ¯”è¼ƒéº»ç…©ã€‚",title:"Untitled Page"},"/spaces/ddd/strategic-design":{content:"# Strategic Design\n\u003e æˆ°ç•¥\n\n- [Event](spaces/ddd/event.md)\n- [Command](spaces/ddd/command.md)\n- User\n- Read Model\n- Third Party\n- [Aggregate](spaces/ddd/aggregate.md)\n- [Bounded Context](spaces/ddd/bounded-context.md)\n- [Subdomain](spaces/ddd/subdomain.md)\n\n## åŸ·è¡Œé †åº\n\n1. åŒ¡åœˆ DDD ç¯„åœ, åœ¨ç™¼æƒ³æ™‚å¦‚æœå·²çŸ¥è¶…éç¯„åœ, å¯ä½¿ç”¨ç²‰ç´…è‰²è¡¨ç¤º, å…¶ä»£è¡¨å¦ä¸€å€‹è¤‡é›œæµç¨‹\n2. å®šç¾© Command (è—è‰²) è·Ÿ User(é»ƒè‰²)\n3. åœ¨ Command è·Ÿ Event ä¹‹ä¸­æ‰¾ Logic (é»ƒè‰²), å‹¢å¿…æœƒæ‰“ç ´åŸæœ¬çš„æ©˜, ç´«è‰²\n4. Aggregate èšåˆæ‰€æœ‰ä¾¿åˆ©è²¼\n5. æ‰¾ Bounded Context\n\n## Sticky Note\n\n- **æ©˜è‰²**: å·²ç¶“ç™¼ç”Ÿçš„äº‹å¯¦ï¼Œä¸å¯æ”¹è®Šï¼Œä½¿ç”¨éå»å¼\n- **ç´«è‰²**: å¤§æµç¨‹, å³æ©˜è‰²çš„ç¾¤çµ„\n- **ç²‰ç´…**: Third/External Party\n- **é»ƒè‰²**: User/Role\n- **è—è‰²**: Command",title:"Untitled Page"},"/spaces/ddd/subdomain":{content:"# Subdomain\n\nSubDomain å¯åˆ†:\n- Generic Subdomain\n- Support Subdomain\n- Core Subdomain\n\n## Generic Subdomain\n\nè¼ªå­ä¸ç”¨å†é€ , æ‰¾å…¶ä»–ç¾æˆè»Ÿé«”æˆ–å…¶ä»–å» å•†çš„ API, å¦‚: email, sms, åŠ å¯†ç­‰\n\n## Support Subdomain\n\nç”¨ä¾†æ”¯æ’ core çš„ subdomain\n\n## Core Subdomain\n\næœ€é—œæ³¨çš„ domain, é€šå¸¸æ˜¯æ”¹é€ çš„ç›®æ¨™\n",title:"Untitled Page"},"/spaces/ddd/tactical-design":{content:"# Tactical Design\n\n\u003e æˆ°è¡“\n\n## æé«˜ç³»çµ±å­˜æ´»ç‡\n- Living Document - è®“æ–‡ä»¶èªè¨€è·Ÿç¨‹å¼èªè¨€å„˜é‡ä¸€è‡³\n- Bubble - è®“ä¸€äº›é‚„æ²’æœ‰è¦ç–é›¢çš„ç³»çµ±, \n- Infrastructure - CICD, Auto test\n- Architecture - \n\n## Re-modular \nModule in Monolith first\n\n\n## Core Domain Pattern\n\nXè»¸: Model Complicity\nYè»¸: Business Differentiation\n\n- Table stakes former core\n- Short-term core\n- Hidden core\n- Black swan core\n\n## ArchUnit\n\næ¸¬è©¦ç¨‹å¼ä¾è³´çš„å·¥å…·\nhttps://www.archunit.org/use-cases\n\n## è³‡æ–™çµæ§‹\n\n- maven submodule: bounded context\n- aggregate æ”¾ domain ä¸­\n\n[Domain Modeling](spaces/ddd/domain-modeling.md)\n[Example Mapping](spaces/ddd/example-mapping.md)\n",title:"Untitled Page"},"/spaces/event-sourcing/aggregate-business-invariants":{content:" # Aggregate Business Invariants\n\né¦–å…ˆ Aggregate æ‡‰è² è²¬å…¶é‚Šç•Œå…§çš„ [Invariants](spaces/ddd/invariants.md), å†ä¾† Aggregate æœ¬èº«ä¹Ÿæ‡‰è©²æ˜¯ Transaction Boundary, å› æ­¤ Aggregate å¿…é ˆä¹Ÿå¯ä»¥ä¿è­‰åœ¨å¤šå€‹ transactions ä¸‹çš„æ­£ç¢ºæ€§ã€‚\n\né€é [Optimistic Concurrency Control](spaces/umani/optimistic-concurrency-control.md) æˆ‘å€‘å¯ä»¥ç¢ºä¿åœ¨å¤šå€‹ Transactions ä¸‹éƒ½å¯ä»¥**ä¾ç…§é †åºçš„**åŸ·è¡Œå®Œæˆ, ä¸”ä¸æœƒäº’ç›¸å½±éŸ¿, ç°¡å–®ä¾†å°±æ˜¯èªªæ¯å€‹ Transaction éƒ½éœ€è¦ç¢ºèªè³‡æ–™æ²’æœ‰è¢«å…¶ä»–çš„ Trnasaction ç•°å‹•éã€‚\n\n## Last Event Number\n\nå¾ Stream å»ºç«‹å‡º Aggregate æ™‚, å¿…é ˆè¨˜ä½ last event number, åœ¨å°‡æ–°çš„ event æ”¾å…¥ Stream å‰, å¿…é ˆæª¢æŸ¥ç•¶å‰çš„ Stream çš„ event number\n\n![](/spaces/event-sourcing/attachments/occ-last-event-number.png)\n\nç•¶ event number ä¸€æ¨£æ™‚ä»£è¡¨æ²’æœ‰å…¶ä»– Transaction æœ‰å¢åŠ  event, é€™æ™‚æˆ‘å€‘æ‰å¯ä»¥å¯«å…¥æ–°çš„ event\n\n![](/spaces/event-sourcing/attachments/occ-add-new-event.png)\n\nåä¹‹ç•¶ä¸ä¸€æ¨£æ™‚, å°±ä¸èƒ½å¯«å…¥æ–°çš„ event é€² Stream\n\n### Source Code Example\n\n![](/spaces/event-sourcing/attachments/ooc-source-code.png)\n\n## Kafka\n\nä¹Ÿè¨± Kafka offset ä¹Ÿå¯ä»¥ç”¨, ä½†å¯èƒ½è¦ç¢ºèªä¸€ä¸‹ Kafka æ˜¯å¦å·²ç¶“æ”¯æ´äº†",title:"Untitled Page"},"/spaces/event-sourcing/copy-transform":{content:"# Copy Transform\n\né¦–å…ˆå…ˆå®šç¾©å¤šä¹…è¦ Transform ä¸€æ¬¡, ä¾‹å¦‚æˆ‘å€‘æ¯å¹´åšä¸€æ¬¡, é€™æ¨£æˆ‘å€‘æœƒåœ¨å‰ä¸€å¹´çš„æœ€å¾Œå¢åŠ  Deactivated event, ä¸¦å†æ¬¡å¹´å¢åŠ ä¸€å€‹ Initialized event, ä¸¦å°‡å…©å€‹ event é€£æ¥èµ·ä¾†\n\n![](/spaces/event-sourcing/attachments/copy-transform.png)\n\n- é€™å…©å€‹åŸºæœ¬ä¸Šæ˜¯ä¸åŒçš„ Stream \n- å°æ‡‰ Queue, æœƒæ˜¯ä¸åŒçš„ Kafak topic\n\nå› æ­¤ App åœ¨è®€å–åˆ° Deactivated event è©²æ€éº¼è‡ªå‹•åˆ‡æ›åˆ°æ‰€é€£æ¥çš„ Initialized event çš„ Stream å‘¢?\n\n\u003e é€™é‚Šå¤§æ¦‚æ˜¯æœ€ç²¾è¯æ‰€åœ¨, è¬›è§£ä¹Ÿæ²’é€éœ²ä»–å€‘æ€éº¼åš, ä½†å¦‚æœå¯ä»¥é‡å•Ÿ App ä¾†åšåˆ‡æ›é‚£æœƒç°¡å–®å¾ˆå¤š",title:"Untitled Page"},"/spaces/event-sourcing/create-a-snapshot-of-the-stream":{content:"# Create a Snapshot of the Stream\n\næ™‚é–“ä¸€ä¹…ç•¶ Stream è¶Šä¾†è¶Šå¤§ä»¥å¾Œ, ç¨‹å¼è©²å¦‚ä½•æ‡‰å° Large Stream å‘¢? åŸºæœ¬ä¸Šæˆ‘å€‘çš„ç¨‹å¼ä¸è™•ç† Large Stream!\n\nè€Œæ˜¯æˆ‘å€‘é€é [Copy Transform](spaces/event-sourcing/copy-transform.md) æ–¹å¼ä¾†å»ºç«‹ Strea çš„ Snapshot, ä¾†è®“ç¨‹å¼ç¶­æŒè®€å– Small Stream!",title:"Untitled Page"},"/spaces/event-sourcing/dealing-with-errors":{content:"# Dealing with Errors\n\nå‡è¨­éå»æœ‰ä¸€å€‹ Event çš„å…§å®¹ç™¼ç”Ÿå•é¡Œ, è©²å¦‚ä½•è™•ç†å‘¢? åƒè¬ä¸å¯ä»¥ç›´æ¥ update event store, ç•¢ç«Ÿ event store ç‚º [Single Source of Truth](spaces/umani/single-source-of-truth.md), æ—¢ç„¶æ˜¯äº‹å¯¦æ€éº¼å¯ä»¥ä¿®æ”¹?\n\n## Use Compensation Events\n\næˆ‘å€‘é€éè£œå„Ÿäº‹ä»¶ä¾†è™•ç†éŒ¯èª¤\n\n### Partial Compensation\n\né€é **Corrected Event** ä¾†ä¿®æ­£éå»çš„**éƒ¨åˆ†**éŒ¯èª¤, ä¾‹å¦‚æˆ‘å€‘æƒ³æŠŠ `Euro` æ–‡å­—æ”¹æˆ `EUR`:\n\n![](/spaces/event-sourcing/attachments/partial-compensation.png)\n\né€™å€‹æ¨¡å¼æ™‚é–“ä¹…äº†, åœ¨å›é¡§éƒ¨åˆ† Stream æ™‚ä¸å®¹æ˜“çš„å»äº†è§£å‰å› å¾Œæœ, è€Œæ˜¯å¿…é ˆé‚„è¦æŸ¥çœ‹å®Œæ•´çš„ Stream æ‰çŸ¥é“åŸå› \n\n### Full Compensation\n\né€é **Cancelled Event** ä¾†å®Œæ•´çš„å–æ¶ˆéå»çš„éŒ¯èª¤, æƒ…å¢ƒä¸€æ¨£æˆ‘å€‘åªæƒ³æŠŠ `Euro` æ–‡å­—æ”¹æˆ `EUR`, ä½†é€™æ¬¡æ˜¯å–æ¶ˆä¹‹å‰çš„éŒ¯èª¤ event:\n\n![](/spaces/event-sourcing/attachments/full-compensation.png)\n\né€™å€‹æ¨¡å¼ä¸‹, ä»¥ Stream çš„è§’åº¦ä¾†çœ‹æ˜¯æ¯”è¼ƒæ˜ç¢ºçš„ä¸”æ¯”è¼ƒæ¸…æ¥šçš„\n",title:"Untitled Page"},"/spaces/event-sourcing/double-write":{content:"# Double Write\n\nProducer å°‡å…©å€‹ç‰ˆæœ¬çš„ event éƒ½ç™¼ä½ˆ, è€Œæˆ‘å€‘é æœŸ Consumer æ‡‰è©²è¦å¯ä»¥è‡ªå·±åˆ¤æ–·è©²è™•ç†å“ªå€‹ç‰ˆæœ¬çš„ event\n\n![](/spaces/event-sourcing/attachments/versino-double-write.png)",title:"Untitled Page"},"/spaces/event-sourcing/general-understanding":{content:"# General Understanding \n\n![event-sourcing-flow](/spaces/event-sourcing/attachments/event-sourcing-flow.png)\n\nåœ¨ç¶“é [DDD](moc/ddd-moc.md) çš„æ´—ç¦®ä¹‹å¾Œ, æˆ‘å€‘æœƒæœ‰å¾ˆå¤š [Event](spaces/ddd/event.md), åŒ…å«äº† Event type è·Ÿ Dataã€‚æˆ‘å€‘æœƒå°‡é€™äº› Event **æœ‰é †åºæ€§**çš„å„²å­˜åœ¨ Stream ä¸­ (é€šå¸¸å°±æ¡ç”¨ Event çš„å»ºç«‹é †åº)ï¼Œç„¶å¾Œå†å°‡é€™äº› Stream å„²å­˜åˆ° EventStore ä¸­, ä¸¦ç‚ºæ¯å€‹ Event ç”¢ç”Ÿç¨ä¸€ç„¡äºŒçš„ IDã€‚\n\næ¥è‘—æˆ‘å€‘æœƒé€é [Projection](spaces/event-sourcing/projection.md) å°‡ Stream ä¸­çš„æ‰€æœ‰ Events å»è¨ˆç®—å‡º Aggregate çš„ current state, ç‚ºäº†æ–¹ä¾¿ä½¿ç”¨, æˆ‘å€‘ä¹Ÿå¯ä»¥å°‡ current state å„²å­˜æˆä¸€å€‹ [Read Model](spaces/event-sourcing/read-model.md)",title:"Untitled Page"},"/spaces/event-sourcing/guarantee-correctness-when-writing":{content:"# Guarantee Correctness when writing\n\n\u003e Validation against a read model is prone to **INCONSISTENCIES**\n\nRead Model æ‰€æä¾›çš„è³‡è¨Š, åŒæ™‚æœ‰æ©Ÿæœƒè¢«å¤šå€‹æœå‹™æˆ–æ˜¯ Thread ä½¿ç”¨, é€™æ™‚å€™å°±æœƒé€ æˆä¸€äº›ä¸ä¸€è‡´çš„å•é¡Œ!\n\næœ‰å€‹ç¶“å…¸çš„ææ¬¾æƒ…å¢ƒ: å…©å€‹ Thread åœ¨æª¢æŸ¥åŒä¸€å¸³æˆ¶é¤˜é¡æ™‚éƒ½æ˜¯é€šéçš„, ä½†ä¸€èµ·ä¸‹ææ¬¾ Command æ™‚, ä½ çš„å¸³æˆ¶å°±è¶…æ”¯å›‰!\n\n![read-withdrawn](/spaces/event-sourcing/attachments/read-withdrawn.png)\n\næˆ‘å€‘æœ‰ä½¿ç”¨å…©å€‹æ–¹å¼ä¾†è§£æ±ºé€™å€‹å•é¡Œ\n\n- [Manage Transactions With a Database](spaces/event-sourcing/manage-transactions-with-database.md) \n- [Aggregate Business Invariants](spaces/event-sourcing/aggregate-business-invariants.md)\n\n## Reference\n\n- [Messaging as the Single Source of Truth](https://www.confluent.io/blog/messaging-single-source-truth/)",title:"Untitled Page"},"/spaces/event-sourcing/handle-versioning":{content:"# Handle Versioning\n\nåœ¨ Java ä¸–ç•Œä¸­, æˆ‘å€‘é€šå¸¸é€é Jar ä¾† share source code, å‡è¨­ç¾åœ¨æ˜¯ 1.0.0 jar åŒæ™‚çµ¦ Producer è·Ÿ Consumer ä½¿ç”¨: \n\n![](/spaces/event-sourcing/attachments/version-v1.png)\n\nç•¶ Producer èª¿æ•´ event é–‹å§‹ç™¼ä½ˆ 2.0.0 æ™‚, è€Œæ‰€æœ‰çš„ Consumer åˆé‚„æ²’å®Œå…¨è·Ÿä¸Šæ™‚, æˆ‘å€‘è©²æ€éº¼è¾¦?\n\n![](/spaces/event-sourcing/attachments/version-v2.png)\n\n## Solutions\n\n- [Double Write](spaces/event-sourcing/double-write.md)\n- [Upcaster](spaces/event-sourcing/upcaster.md)\n- Or... we don't upgrade event\n\n## Don't Upgrade event \nä»»ä½• Event schema çš„ç•°å‹•éƒ½å¿…é ˆç¢ºä¿æ–°çš„ schema å¯ä»¥è¢«èˆŠçš„ handler è®€å–ä½¿ç”¨ï¼Œé€™æ¨£ä½ æ‰å¯ä»¥ç•°å‹•ä¹‹, è‹¥ä¸è¡Œ, å®ƒå°±æ˜¯ä¸€å€‹æ–°çš„ Event, ä½ æ‡‰è©²è¦æœ‰å°æ‡‰çš„æ–° handler!\n\nåä¹‹, æ–°çš„ handler ä¹Ÿæ‡‰è©²è¦å¯ä»¥è®€å–è™•ç†èˆŠçš„ schema, è‹¥ä¸è¡Œ, ä»–ä¹Ÿå°±æ˜¯ä¸€å€‹æ–°çš„ Event, ä½ æ‡‰è©²ä¹Ÿè¦æœ‰å°æ‡‰çš„æ–° handler!\n\n\u003e å¤§éƒ¨åˆ†æƒ…ç‹€åªæœ‰åœ¨å¢åŠ æ¬„ä½æ™‚æ‰æ¯”è¼ƒæœ‰æ©Ÿæœƒç›¸å®¹æ–¼æ–°èˆŠ handler\n\n### Event Schema\n\nåœ¨ Event ä¸­æˆ‘å€‘é€šå¸¸ä½¿ç”¨ Weak Schema (ä¸€èˆ¬ä½¿ç”¨ [JSON Schema](spaces/umani/json-schema.md)), å°±ä»¥æ–°å¢æ¬„ä½ä¾†èªª:\n\nä»»ä½•èˆŠç‰ˆ handler åœ¨ deserialized æ™‚æ–°çš„ schema æ™‚, å›  week schema ç‰¹æ€§æœƒè‡ªå‹•çš„å¿½ç•¥æ–°æ¬„ä½, ä¸¦æ­£å¸¸çš„åŸ·è¡ŒèˆŠé‚è¼¯, é€™ä¸æœƒæœ‰ä»€éº¼å•é¡Œã€‚\n\né‚£å¦‚æœæ˜¯æ–°çš„ handler è¦è™•ç†èˆŠçš„ schema æ™‚, å°±å¿…é ˆçµ¦äºˆæ–°æ¬„ä½é è¨­å€¼è·Ÿé‚è¼¯, é€™å°±å¥½åƒåœ¨é—œè¯å¼è³‡æ–™åº«, ç•¶æˆ‘å€‘è¦æ“´å……æ¬„ä½æ™‚, ä¹Ÿå¿…é ˆçµ¦äºˆé è¨­å€¼è®“ç¨‹å¼æ­£å¸¸çš„åŸ·è¡Œä¸€æ¨£, ç•¶ç„¶, å¦‚æœä½ çµ¦ä¸äº†é è¨­å€¼è·Ÿé‚è¼¯, é‚£å®ƒå°±æ˜¯ä¸€å€‹æ–°çš„ event äº†!\n\n ",title:"Untitled Page"},"/spaces/event-sourcing/manage-transactions-with-database":{content:"# Manage Transactions with a database\n\né€™ç¨®ç‹€æ³æˆ‘å€‘å¯ä»¥é¸æ“‡åœ¨ Event Store ä¹‹å‰æ”¾ä¸€å€‹ Database å»ç®¡ç† Transaction\n\næˆ‘å€‘ä½¿ç”¨ä¸€å€‹ Database æ“‹åœ¨ Event Store ä¹‹å‰, å†ä½¿ç”¨ [CDC](spaces/umani/cdc.md) æŠ“å– Event Stream åˆ° Event Store ä¸­, åœ¨å€‹ Database å³ç¨±ç‚º **Transaction Database**\n\nä»¥ä¸‹åœ–ç‚ºä¾‹\n\n- Transaction Database ä½¿ç”¨ Couchbase\n- Event Store ä½¿ç”¨ Kafka\n\n![](https://cdn.confluent.io/wp-content/uploads/Screenshot-2017-08-02-08.39.55-1024x865.png)\n\nç•¶ Order Service æ¥åˆ° Bug Command æ™‚, å¯«çš„æ˜¯ Couchbase, åœ¨é€™é‚Šç®¡ç†å¤šå€‹ Order Service Instance æˆ–å¤šå€‹ Thread çš„ Transaction\n\nç•¶ Couchbase è³‡æ–™æœ‰è®ŠåŒ–æ™‚, æœƒè¢« CDC (Kafka connect) ç™¼ä½ˆåˆ° Kafka ä¸­\n\n## Trafe Off\n\né€™å€‹æ–¹å¼è¦ä»˜å‡ºçš„å¤§æ¦‚å°±æ˜¯, ä½ éœ€è¦å¤šç¶­è­·ä¸€å€‹ **Production Grage** çš„ Database!",title:"Untitled Page"},"/spaces/event-sourcing/projection":{content:"# Projection\n\nProjection å°±æ˜¯ç”¨ä¾†è™•ç† [event](spaces/ddd/event.md) çš„ç¨‹å¼é‚è¼¯, åŸºæœ¬ä¸Šå°±æ˜¯ä¸€æ¨ Event Handlers!\n\nä¾‹, æˆ‘å€‘æœ‰ä»¥ä¸‹ event:\n- `UserCreated`\n- `UserOnboarded`\n- `UserRelocated` \n\nå‰‡ **Current User Projection** çš„å…§å®¹å¤§æ¦‚æ˜¯:\n\n![projection](/spaces/event-sourcing/attachments/projection.png)\n\nè€Œç”¢å‡ºæœƒæ˜¯ [Aggregate](spaces/ddd/aggregate.md)\n\n![projection-aggregate](/spaces/event-sourcing/attachments/projection-aggregate.png)\n",title:"Untitled Page"},"/spaces/event-sourcing/read-model":{content:"# Read Model\n\nRead Model å¯ä»¥èªªæ˜¯åœ¨ Event Store ä¸­, ç‰¹å®šçš„ Event of Stream çš„ç”¢å‡ºã€‚\n\nä»¥ç¨‹å¼ä¾†çœ‹, å¤§æ¦‚åƒæ˜¯:\n\n```java\nvar readModel = Stream.of(events)\n					  .leftFold(handlers)\n```\n\né€™å€‹ç”¢å‡º, é€šå¸¸ä¹Ÿå°±æ˜¯æœƒè¢«å„²å­˜åœ¨æ¯å€‹æœå‹™è‡ªå·±çš„ db ä¸­ \n\n![readmodel](/spaces/event-sourcing/attachments/readmodel.png)",title:"Untitled Page"},"/spaces/event-sourcing/remodel-domain":{content:"# Re-Model Domain\n\nç•¶æˆ‘å€‘éœ€è¦ Re-Model Domain æ™‚, ä¾‹å¦‚æ‰“æ•£ event, è©²æ€éº¼åšå‘¢? åŸºæœ¬ä¸Šè·Ÿ [Copy Transform](spaces/event-sourcing/copy-transform.md) ä¸€æ¨£æ¦‚å¿µ:\n\n![](/spaces/event-sourcing/attachments/remodel-domain.png)",title:"Untitled Page"},"/spaces/event-sourcing/upcaster":{content:"# Upcaster\n\nUpcaster é€šå¸¸æ“‹åœ¨ Queue è·Ÿ Consumer ä¹‹é–“, å®ƒè² è²¬åšäº‹ä»¶ç‰ˆæœ¬çš„è½‰æ›\n\n![](/spaces/event-sourcing/attachments/upcaster.png)\n\n## Trafe off\n\nè¦æ³¨æ„çš„æ˜¯, ç•¶æ™‚é–“ä¸€ä¹…, é€™ç¨®æ¨¡å¼ä¸‹ Upcaster å¾ˆå®¹æ˜“çš„æœƒå¤±æ§è·Ÿç¶­è­·, å› æ¬¡ä»–æœƒæœ‰æœ‰å¤§é‡çš„è½‰æ›é‚è¼¯åœ¨å…¶ä¸­\n\n![](/spaces/event-sourcing/attachments/upcaster-chaos.png)",title:"Untitled Page"},"/spaces/event-sourcing/you-may-not-need-a-read-model":{content:"# You may NOT need a read model\n[Read Model](spaces/event-sourcing/read-model.md) æœƒæœ‰ä¸€äº› Trade off:\n- æœ€çµ‚ä¸€è‡´æ€§\n- è©²å¦‚ä½• Replays and Rebuilds\n- è©²å¦‚ä½• Re-Deliveries\n- Read Db çš„ç¶­é‹æˆæœ¬\n\næ›å€‹è§’åº¦æƒ³, å¦‚æœä¸è¦æœ‰ Read Model å‘¢?\n\næˆ‘å€‘å¦‚æœåœ¨è®€å– Event Store æ™‚, å°±ä¾ç…§ Aggregate ID éæ¿¾ Stream, æŠŠ Stream æœ€å°åŒ–\n\n![stream-per-aggregate](/spaces/event-sourcing/attachments/stream-per-aggregate.png)\n\nå›åˆ°ä½¿ç”¨ç«¯, åœ¨ runtime è¦å–å¾— current state æ™‚, ç¨‹å¼åœ¨å³æ™‚çš„å»é‹ç®—å‡º current state çš„ Aggregate\n\n![aggregate-read-from-stream](/spaces/event-sourcing/attachments/aggregate-read-from-stream.png)\n\nç”±æ–¼æˆ‘å€‘æŠŠ Stream æœ€å°åŒ–äº†, æ•ˆèƒ½ä»ä¸éŒ¯, è€Œä¸”ä¹Ÿæ²’æœ‰äº†é‚£äº› Trade off!\n\nå¦‚æœéœ€è¦é€éæ¢ä»¶å»æŸ¥è©¢, å¯èƒ½è¦ä½¿ç”¨åˆ°ä¸€äº› Event Store æ‰€æä¾› Category Projection äº†!\n\n![aggregate-read-from-projection](/spaces/event-sourcing/attachments/aggregate-read-from-projection.png)\n\nåœ¨ Event Store ä¸­å°±å¯ä»¥å…ˆå°‡ Event åˆ†é¡å¾Œå†è®€å‡º Stream äº†!\n\n\u003e What if... æˆ‘å€‘ç”¨çš„ event store æ²’æœ‰ category projection ;\\",title:"Untitled Page"},"/spaces/kubernetes/assigning-pods":{content:'# Assigning Pods\n\nåœ¨éƒ¨ç½² Deployment æ™‚, æœ‰äº›æƒ…æ³æˆ‘å€‘æœƒå¸Œæœ› Kubernetes ä¾ç…§æˆ‘å€‘çš„éœ€æ±‚ä¾†å®‰æ’éƒ¨ç½²çš„ Node, ä¾‹å¦‚:\n\n- ç•¶æˆ‘å€‘é–‹å¤šä»½ Replicas æ™‚, å¸Œæœ›é€™äº› Replicas æ™‚å„˜é‡ä¸è¦å®‰æ’åˆ°åŒä¸€å€‹ Node ä¸Š\n- ä¸åŒçš„éƒ¨ç½²ä½†æ€§è³ªç›¸é›·åŒçš„ç¨‹å¼, ä¾‹å¦‚è³‡æºéœ€æ±‚ (å¦‚ CPU é‹ç®—) è¼ƒé«˜ç­‰, å¸Œæœ›å„˜é‡ä¸è¦å®‰æ’åˆ°åŒä¸€å€‹ Node ä¸Š\n\n## Affinity\n\nåœ¨ `spec.affinity` ä¸‹ä¸€å…±æœ‰ `podAffinity` (æ­£å‘) æˆ– `podAntiAffinity` (åå‘), é€™æ˜¯ç”¨ä¾†ç´„æŸ Kubernetes è©²æ€éº¼å®‰æ’ Pod åˆ° Node ä¸Š, é€™å…©ç¨® affinity ä¸­éƒ½æœ‰å…©ç¨® type å¯ä»¥ä½¿ç”¨:\n\n- `requiredDuringSchedulingIgnoredDuringExecution` - **Hard requirement**, è¦æ±‚ Kubernetes ä¾ç…§è¨­å®šå®‰æ’, æ²’æ»¿è¶³å°±ä¸éƒ¨ç½² Pod\n- `preferredDuringSchedulingIgnoredDuringExecution` - **Soft requirement**, å»ºè­° Kubernetes å„˜é‡æ»¿è¶³è¨­å®šå®‰æ’, ç„¡æ³•æ»¿è¶³ä»è¦éƒ¨ç½² Pod\n\n## Use Case\n\n\u003e ä»¥ä¸‹æˆ‘å€‘ç¯„ä¾‹æ˜¯ä¸€å€‹å¸¸è¦‹çš„éœ€æ±‚: **å»ºè­°** Kubernetes å°‡å¤šå€‹ replicas å„˜é‡åˆ†æ•£åˆ°ä¸åŒçš„ Node ä¸­\n\né¦–å…ˆæˆ‘å€‘åœ¨ SLKE ä¸­éƒ¨ç½²ä¸€å€‹ deployment ä½œç‚ºç¯„ä¾‹, å…ˆè¨­å®šä¸€å€‹ replica å°±å¥½:\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-nginx\nspec:\n  selector:\n    matchLabels:\n      run: my-nginx\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        run: my-nginx\n    spec:\n      affinity:\n        podAntiAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n            # å¯è¨­å¤šæ¢ä»¶, å…¶ä¸­ weight ç¯„åœç‚º 1-100\n            # éƒ¨ç½²æ–¼ k8s æœƒå°‡æ»¿è¶³æ¢ä»¶çš„ weight ç´¯åŠ , ç¸½åˆ†æœ€é«˜çš„ node è¦–ç‚º most preferred \n            - weight: 1\n              podAffinityTerm:\n                labelSelector:\n                  matchExpressions:\n                  - key: run\n                    operator: In\n                    values:\n                      - my-nginx\n                # è¨­å®š Node åˆ†ç¾¤çš„ä¾æ“š\n                # å¯é€é kubectl get nodes --show-labels æŸ¥çœ‹æœ‰å“ªäº› label å¯ç”¨\n                topologyKey: "kubernetes.io/hostname"\n      containers:\n      - name: my-nginx\n        image: nginx\n        ports:\n        - containerPort: 80\n```\n\nä»¥ä¸Šè¨­å®šæœƒå»ºè­° Kubernetes åœ¨éƒ¨ç½²æ™‚, ä»¥ Node çš„ `kubernetes.io/hostname` åšç¾¤çµ„, åœ¨æ¯å€‹ç¾¤çµ„ä¸­éƒ½å„˜é‡ä¸é‡è¤‡éƒ¨ç½² label ç‚º `run: my-nginx` çš„ pod, ç”±æ–¼ Node `kubernetes.io/hostname` ä¸å¯èƒ½é‡è¤‡, ä¹Ÿå°±æ˜¯ä¸Šè¿°è¨­å®šä»¥ç™½è©±æ–‡ä¾†èªª, ä¸€ä½†é–‹å¤šå€‹ replicas, å°±æ˜¯å„˜é‡å°‡ä¸åŒçš„ pod åˆ†æ•£åœ¨ä¸åŒçš„ node ä¸­\n\næ¥è‘—æˆ‘å€‘æŸ¥çœ‹ä¸€ä¸‹ç¾åœ¨ SLKE æœ‰å¤šå°‘ Node:\n\n```sh\n$ kubectl get node\nNAME            STATUS   ROLES                  AGE    VERSION\nk8s-master-91   Ready    control-plane,master   161d   v1.20.1\nk8s-master-92   Ready    control-plane,master   161d   v1.20.1\nk8s-master-95   Ready    control-plane,master   161d   v1.20.1\nk8s-worker-40   Ready    \u003cnone\u003e                 161d   v1.20.1\nk8s-worker-41   Ready    \u003cnone\u003e                 161d   v1.20.1\nk8s-worker-44   Ready    \u003cnone\u003e                 161d   v1.20.1\nk8s-worker-46   Ready    \u003cnone\u003e                 161d   v1.20.1\nk8s-worker-53   Ready    \u003cnone\u003e                 161d   v1.20.1\n```\n\nä»¥ä¸Šæœƒç™¼ç¾ worker node (æœªæ¨™è¨˜ control-plane çš„ node å³ worker node) ä¸€å…±æœ‰ 5 å°, å› æ­¤æˆ‘å€‘åœ¨å°å‰›å‰›éƒ¨ç½²çš„ deployment åšäº›èª¿æ•´:\n\n```sh\n$ kubectl scale --replicas=5 deployment my-nginx\n```\n\næœ€å¾Œè§€å¯Ÿ pod æ‰€é–‹çš„ node, æœƒç™¼ç¾æ‰€æœ‰çš„ pod éƒ½é–‹åœ¨ä¸åŒçš„ Node `kubernetes.io/hostname` ä¸Š\n\n```sh\n$ kubectl get pod -l run=my-nginx -o wide\nNAME                       READY   STATUS    RESTARTS   AGE   IP              NODE            NOMINATED NODE   READINESS GATES\nmy-nginx-fc5f9bc4b-229mt   2/2     Running   0          41s   10.244.21.92    k8s-worker-40   \u003cnone\u003e           \u003cnone\u003e\nmy-nginx-fc5f9bc4b-66q7j   2/2     Running   0          41s   10.244.166.81   k8s-worker-53   \u003cnone\u003e           \u003cnone\u003e\nmy-nginx-fc5f9bc4b-k7jps   2/2     Running   0          20m   10.244.9.213    k8s-worker-44   \u003cnone\u003e           \u003cnone\u003e\nmy-nginx-fc5f9bc4b-m6vrz   2/2     Running   0          41s   10.244.253.98   k8s-worker-46   \u003cnone\u003e           \u003cnone\u003e\nmy-nginx-fc5f9bc4b-s5bk2   2/2     Running   0          42s   10.244.52.163   k8s-worker-41   \u003cnone\u003e           \u003cnone\u003e\n```\n\n## Reference\n\n- [Assigning Pods to Nodes](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/)\n',title:"Untitled Page"},"/spaces/spring/externalized-configuration":{content:'\n# Externalized Configuration\n\nSpring Boot 2.4 æ”¹é€²äº†è™•ç† `application.properties` ç­‰è¨­å®šæª”çš„è®€å–çš„æ¨¡å¼, èª¿æ•´å¾Œçš„é‚è¼¯å¤šæ”¯æ´äº†é…ç½®å¤–éƒ¨çš„è¼‰å…¥æ–¹å¼, æ­¤ç¯‡æä¾›äº†ä¸€å€‹ç°¡å–®çš„ workshop ä¾†ä»‹ç´¹æ€éº¼æ‡‰ç”¨åˆ°é›²å¹³å° (Cloud Platform) çš„éƒ¨ç½²ä¸Š\n\n\u003e å¦‚æœæ˜¯ç”¨ Spring Boot 2.4+ ä½†æƒ³è¦ä½¿ç”¨èˆŠçš„é‚è¼¯, å¯è¨­å®š `spring.config.use-legacy-processing=true`\n\n## Config Data File\n\nSpring Boot åœ¨å•Ÿå‹•æ™‚æœƒåƒè€ƒè¨±å¤šè¨­å®šä¾†æº (Configuration Sources), Spring ä¹Ÿæä¾›äº†[è¨±å¤šæ–¹å¼ä¾†é…ç½®](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config), é€™äº›æºåŒ…å«äº†ä»¥ä¸‹å¸¸è¦‹çš„ (é †åºæ˜¯é‡è¦çš„):\n\n- Config data file(å¦‚ `application.properties`)\n- OS environment variables\n- Java System properties (`System.getProperties()`).\n- Command-line arguments\n- Testing config\n- ... etc\n\nå…¶ä¸­åœ¨è®€å– Config data file çš„éšæ®µé †åºå¦‚ä¸‹ï¼š\n\n1. Application properties packaged inside your jar (`application.properties` and YAML variants).\n1. Profile-specific application properties packaged inside your jar (`application-{profile}.properties` and YAML variants).\n1. Application properties outside of your packaged jar (`application.properties` and YAML variants).\n1. Profile-specific application properties outside of your packaged jar (`application-{profile}.properties` and YAML variants).\n\n\n### External Application Properties\n\nSpring Boot é è¨­çš„è¼‰å…¥ç›®éŒ„é †åºç‚º:\n\n- `optional:classpath:/;optional:classpath:/config/`\n- `optional:file:./;optional:file:./config/;optional:file:./config/*/`\n\nä½ å¯ä»¥ä½¿ç”¨ `spring.config.location` è¦†è“‹é è¨­è¼‰å…¥è¡Œç‚º:\n\n```properties\n# è¦†è“‹é è¨­è¼‰å…¥è¡Œç‚º, è‹¥ç‚ºè³‡æ–™å¤¾è¦ä»¥ \'/\' çµå°¾\nspring.config.location=optional:classpath:/custom-config/\n```\n\næˆ–æ˜¯ä½¿ç”¨ `spring.config.additional-location` åœ¨é è¨­è¼‰å…¥è¡Œç‚ºä¹‹å¾Œå¢åŠ é¡å¤–çš„è®€å–è·¯å¾‘:\n\n```properties\nspring.config.additional-location=optional:classpath:/custom-config/\n```\n\nä»¥ä¸Šè¨­å®š Spring åœ¨è¼‰å…¥çš„æ™‚æ©Ÿé»éå¸¸çš„æ—©, é€šå¸¸æ˜¯åœ¨ OS environment variable, system property æˆ– command-line argument å°±å¿…é ˆå…ˆæ±ºå®š, å› æ­¤åœ¨[é…ç½®ä¸Šæœ‰è¨±å¤šé™åˆ¶, ä¸”æª”æ¡ˆæ ¼å¼çš„æ”¯æ´ä¸Šä¹Ÿæœ‰æ‰€é™åˆ¶](https://spring.io/blog/2020/08/14/config-file-processing-in-spring-boot-2-4#importing-additional-configuration)ã€‚\n\nåœ¨é›²å¹³å° (Cloud Platform) çš„éƒ¨ç½²ä¸Š, é€šå¸¸æˆ‘å€‘æœƒåœ¨å•Ÿå‹• Container æ™‚, æ‰å°‡é¡å¤–çš„è¨­å®šä»¥ Volume Mount æ–¹å¼ç¶å®šåˆ° Container ä¸­, å› æ­¤åœ¨ Spring Boot 2.4 ä¹‹å¾Œå¤šäº† `spring.config.import` , å¯ä»¥åœ¨è®€å–åˆ° properties æ™‚æ‰æœƒå†å»è¼‰å…¥æ‰€ import çš„è¨­å®šæª”:\n\n```properties\nspring.application.name=myapp\nspring.config.import=optional:file:./dev.properties\n```\n\n`spring.config.import` é™¤äº† properties æˆ– YAML æª”æ¡ˆæ ¼å¼ä»¥å¤–, é‚„æ”¯æ´äº†æ›´å¤šå…¶ä»–çš„è¨­å®šæ–¹å¼, å¦‚: [Configuration Trees](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.configtree)\n\n### Profile Specific Files\n\nSpring Boot 2.4 ä¹‹å¾Œåœ¨è®€å– `application` properties å¤–, ä¹Ÿè·Ÿä¹‹å‰ä¸€æ¨£æœƒè©¦è‘—è®€å– `application-{profile}` æª”æ¡ˆ, å‡è¨­æˆ‘å€‘å•Ÿå‹•äº† `prod,live` profile , å‰‡è¼‰å…¥çš„é †åºå¦‚ä¸‹ (æª”æ¡ˆæ²’æ‰¾åˆ°ä¸æœƒå ±éŒ¯):\n\n1. `application.properties`\n2. `application-prod.properties`\n3. `application-live.properties`\n\nç•¶ `spring.config.location` æŒ‡å®šå¤šå€‹ç›®éŒ„/æª”æ¡ˆæ™‚, è¦æ³¨æ„:\n\n-  `,` - ä½¿ç”¨é€—è™Ÿåˆ†éš”å¤šå€‹ç›®éŒ„/æª”æ¡ˆï¼Œä¸”**æœ‰è¼‰å…¥é †åº**çš„æ¦‚å¿µ\n-  `;` - ä½¿ç”¨åˆ†è™Ÿåˆ†éš”å¤šå€‹ç›®éŒ„/æª”æ¡ˆ, æ˜¯æ²’æœ‰é †åºçš„å»ºè­°ï¼Œæ‰€æœ‰ç›®éŒ„/æª”æ¡ˆéƒ½æœƒè¢«è¦–ç‚ºåŒä¸€ç­‰ç´šã€‚\n\n\u003e é»æ“Šåƒè€ƒ[å®˜æ–¹ç¯„ä¾‹èªªæ˜](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.profile-specific)\n\nç•¶è¨­å®šæª”è¢« Spring è¼‰å…¥å¾Œ, æœƒè¢«æ”¾å…¥ `Map` çµæ§‹çš„ç‰©ä»¶ä¸­, è‹¥åŒæ¨£çš„ key é‡è¤‡è¼‰å…¥æ™‚, å…¶ value å°‡æœƒè¢«æ›´æ–°, å³å¾Œè“‹å‰ã€‚æ›å¥è©±èªª, **è¼‰å…¥é †åºè¶Šå¾Œé¢çš„è¨­å®šå°‡æœƒæœ€çµ‚è¢«æ¡ç”¨**\n\n## Prepare Application\n\né¦–å…ˆæˆ‘å€‘è¦æº–å‚™ä¸€å€‹ Spring Boot 2.4+ çš„ Application, è«‹åˆ° [Spring Initializr](https://start.spring.io/) ä¸‹è¼‰ä¸€å€‹å…¨æ–°çš„å°ˆ, Spring Boot ç‰ˆæœ¬é¸æ“‡ **2.4+**, Dependencies é¸æ“‡ **Spring Web**, æˆ–æ˜¯åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤å–å¾—:\n\n```bash\n$ curl https://start.spring.io/starter.zip \\\n		-d bootVersion=2.4.3 -d dependencies=web \\\n		-o demo.zip\n$ unzip demo.zip\n```\n\nåœ¨ main class çš„ package ä¸­, åŠ ä¸Šä»¥ä¸‹ Java class\n\n```java\npackage com.example.demo;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class AppNameController {\n\n  @GetMapping\n  public String name(@Value("${spring.application.name}") String appName) {\n    return "Hello " + appName;\n  }\n}\n```\n\næ¥è‘—é–‹å•Ÿå°ˆæ¡ˆä¸­çš„ `application.properties`, åŠ ä¸Š:\n\n```properties\n spring.application.name=MyApp\n```\n\nå®Œæˆä»¥ä¸Šæ­¥é©Ÿå¾ŒåŸ·è¡Œ main class æˆ–é€é `mvn spring-boot:run`å•Ÿå‹• App, æ¥è‘—è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ç¢ºèª:\n\n```bash\n$ curl localhost:8080 \nHello MyApp\n```\n\n## Import Additional Config\n\né€šå¸¸åœ¨é›²å¹³å°ä¸­, éƒ½æœ‰æä¾› volume mounted åŠŸèƒ½å°‡è¨­å®šæª” mount è‡³ Container ä¸­, å› æ­¤ç¾åœ¨æˆ‘å€‘éœ€è¦é…ç½®ä¸€å€‹ç›®éŒ„çµ¦ä¹‹å¾Œ mount config ç”¨, é–‹å•Ÿ `application.properties` åŠ ä¸Š\n\n```properties\nspring.config.import=optional:file:/tmp/config/\n```\n\n`spring.config.import` å¯ä»¥æŒ‡å®šæª”æ¡ˆæˆ–ç›®éŒ„, æ˜¯ç”¨ä¾†å‘Šè¨´ Spring åœ¨å•Ÿå‹•æ™‚é‚„è¦è¼‰å…¥å“ªäº› config\n\nå»ºè­°å¯ä»¥ä½¿ç”¨ç›®éŒ„ (æ–œç·š `/` çµå°¾) çš„æ–¹å¼ä¾†é…ç½®, è®“ Spring é‚„æ˜¯ä¾ç…§ä»–è‡ªå·±çš„è¼‰å…¥é †åºä¾†è®€å–ç›®éŒ„ä¸‹çš„æª”æ¡ˆ, é€™æ¨£å¯ä»¥ä¿ç•™å¤šä¸€é»é…ç½®çš„å½ˆæ€§çµ¦æœªä¾†å„ç¨®é›²å¹³å°çš„éƒ¨ç½²æª”\n\né¿å…åœ¨ Container ä¸­é­é‡æª”æ¡ˆè®€å–æ¬Šé™çš„å•é¡Œ, å»ºè­°å¯ä»¥å°‡ç›®éŒ„é…ç½®åœ¨ `/tmp` ä¸‹\n\n### Test Locally\n\nåœ¨ä½ çš„é›»è…¦å»ºç«‹ `/tmp/config/application.yaml`, å…§å®¹ç‚º:\n\n```yaml\nspring:\n  application:\n    name: MyLocalApp\n```\n\næ¥è‘—é‡æ–°å•Ÿå‹• App, å†é€éåŸæœ¬çš„æŒ‡ä»¤æˆ‘å€‘æœƒç™¼ç¾è¼¸å‡ºè®Šäº†\n\n```bash\n$ curl localhost:8080\nHello MyLocalApp\n```\n\n## Build Image\n\næˆ‘å€‘é€éä»¥ä¸‹æŒ‡ä»¤å»ºç½® Image, ç”¨ä¾†æº–å‚™éƒ¨ç½²åˆ°é›²å¹³å°ä½¿ç”¨! \n\n```bash\nmvn spring-boot:build-image\n```\n\né è¨­çš„ Image åç¨±æ˜¯ maven çš„ `{project.artifactId}:{project.version}`, ä¹Ÿå°±æ˜¯ `demo:0.0.1-SNAPSHOT`\n\nè‹¥è¦ºå¾—ä¸é©ç”¨å¯ä»¥é€éåƒæ•¸ `spring-boot.build-image.imageName` æŒ‡å®šåç¨±, ä½ å¯ä»¥åœ¨ `pom.xml` çš„ `\u003cproperties/\u003e` ä¸­åŠ ä¸Šæˆ–é€é command line å‚³å…¥, å¦‚:\n\n```bash\nmvn spring-boot:build-image -Dspring-boot.build-image.imageName=demo:1.0.0\n```\n\n## Deploy Cloud Platform\n\nåœ¨ç« ç¯€ä¸­æˆ‘å€‘æœƒä»¥å…©å€‹å¸¸è¦‹é›²å¹³å°ä½œç‚ºç¯„ä¾‹: **Docker Swarm** åŠ **Kubernetes**\n\n### Docker Swarm\n\næº–å‚™ä»¥ä¸‹æª”æ¡ˆä¸¦æ”¾åœ¨åŒæ¨£çš„ç›®éŒ„ä¸‹:\n\n```bash\n.\nâ”œâ”€â”€ application.yaml\nâ””â”€â”€ docker-compose.yml\n```\n\n```yaml\nversion: "3.8"\nservices:\n  demo:\n    image: demo:1.0.0\n    ports:\n      - 8080:8080\n    configs:\n      - source: demo-config\n        target: /tmp/config/application.yaml\nconfigs:\n  demo-config:\n    file: ./application.yaml\n```\n\n```yaml\nspring:\n  application:\n    name: MySwarmApp\n```\n\næ¥è‘—é€éä»¥ä¸‹æŒ‡ä»¤éƒ¨ç½²\n\n```yaml\ndocker stack deploy demo -c docker-compose.yml\n# docker stack remove demo\n```\n\næœå‹™å•Ÿå‹•å¾Œ, å†é€éåŸæœ¬çš„æŒ‡ä»¤æˆ‘å€‘æœƒç™¼ç¾è¼¸å‡ºåˆè®Šäº†\n\n```bash\n$ curl localhost:8080\nHello MySwarmApp\n```\n\n### Kubernetes\n\næº–å‚™ä»¥ä¸‹æª”æ¡ˆä¸¦æ”¾åœ¨åŒæ¨£çš„ç›®éŒ„ä¸‹:\n\n```yaml\n.\nâ”œâ”€â”€ configmap.yaml\nâ””â”€â”€ deployment.yaml\n```\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: demo\n  labels:\n    app: demo\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: demo\n  template:\n    metadata:\n      labels:\n        app: demo\n    spec:\n      containers:\n      - name: demo\n        image: demo:1.0.0\n        resources:\n          limits:\n            cpu: 2\n            memory: 1Gi\n          requests:\n            cpu: 1\n            memory: 500Mi\n        ports:\n        - containerPort: 8080\n        volumeMounts:\n        - name: config-volume\n          mountPath: /tmp/config\n      volumes:\n      - name: config-volume\n        configMap:\n          name: demo-config\n```\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: demo-config\ndata:\n  application.yaml: |-\n    spring:\n      application:\n        name: MyKubernetesApp\n```\n\næ¥è‘—é€éä»¥ä¸‹æŒ‡ä»¤éƒ¨ç½²\n\n```yaml\nkubectl apply -f .\n# kubectl delete -f .\n```\n\næœå‹™å•Ÿå‹•å¾Œ, é€é port-forward è¨­å®š port mapping:\n\n```bash\nkubectl port-forward deploy/demo 8080\n```\n\nå†é€éåŸæœ¬çš„æŒ‡ä»¤æˆ‘å€‘æœƒç™¼ç¾è¼¸å‡ºåˆè®Šäº†\n\n```bash\n$ curl localhost:8080\nHello MyKubernetesApp\n```\n\n## Good Old  Days\n\nä¹‹å‰, æˆ‘å€‘æœƒé‡å°å¯èƒ½æœƒä¾ç…§ç’°å¢ƒä¸åŒæœ‰è®Šå‹•çš„è¨­å®š, æå‰æŒ–æ´çµ¦ configmap ä¾†å¡«, ä¾‹å¦‚:\n\n```yaml\nspring:\n  application:\n    name: ${APP_NAME:MyApp}\n```\n\nç„¶å¾Œæˆ‘å€‘æœƒåœ¨ configmap é…ç½®é€™äº›æŒ–å¥½çš„æ´, åœ¨éƒ¨ç½²å‰å…ˆçµ¦å®¢æˆ¶å¡«å¯«:\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: demo-config\ndata:\n  APP_NAME: MyKubernetesApp\n```\n\nå°é–‹ç™¼äººå“¡ä¾†èªª, éœ€è¦æŒ–æ´çš„ç¢ºæ¯”è¼ƒéº»ç…©, åƒæ˜¯:\n\n- è¦æŒ–æ–°çš„æ´ç¸½æ˜¯è¦é‡æ–°æ‰“åŒ… Image\n- æ´æŒ–å¤šäº†ç¶­è­· configmap ä¸Šä¹Ÿè®Šè¤‡é›œè¨±å¤šäº†\n- éœ€è¦æƒ³æŒ–æ´çš„ Key åç¨±å•Š, å–åç¸½æ˜¯æœ€èŠ±æ™‚é–“çš„!\n\nç„¶è€Œå°æ–¼æˆ‘å€‘çš„å®¢æˆ¶ä¾†èªª, ç¶­é‹çš„çª—å£ (å¦‚éç‰ˆäººå“¡) æŒ–æ´å…¶å¯¦æœ‰ä¿éšœçš„, å¦‚ä»–å€‘:\n\n- ä¸éœ€è¦å»äº†è§£ Spring Boot è¦æ€éº¼é…ç½®\n- ä¸ç”¨æ“”å¿ƒé…ç½®çµæ§‹éŒ¯äº†, æˆ– key å¯«éŒ¯å°±è¼•æ˜“çš„å½±éŸ¿ Runtime è¡Œç‚º, ç”šè‡³å°è‡´æ•´å€‹ App é–‹ä¸èµ·ä¾†\n\næƒ³æ›´é ä¸€äº›, å¦‚æœè¦æŠ½è±¡åŒ–å¯¦ä½œè·Ÿé…ç½®æ–¹å¼, æŒ–æ´çš„æ–¹å¼ç”šè‡³é‚„æ›´é©åˆä¸€äº›, ä»¥ç¶­é‹åœ˜éšŠçš„è§’åº¦ä¾†çœ‹, åœ¨é…ç½®éƒ¨ç½²ä¸Šæœ¬ä¾†å°±ä¸éœ€è¦å»çŸ¥é“å¯¦ä½œçš„, ç”šè‡³å°±ç®—åœ¨æœªä¾†æ›æ‰ Spring Boot ä¹Ÿæ˜¯é–‹ç™¼åœ˜éšŠçš„äº‹æƒ…ç½·äº†!\n\næœ¬ç¯‡ä»‹ç´¹äº†æ–°çš„ Spring é…ç½®æ¨¡å¼, å¤§å®¶å¯ä»¥å¾ä¸­æ€è€ƒæ€éº¼é¸æ“‡æˆ–æ··ç”¨é€™äº›é…ç½®æ–¹å¼, ä¾†å»ºè­°å®¢æˆ¶æœ€ä½³çš„è§£æ±ºæ–¹æ¡ˆ!\n',title:"Untitled Page"},"/spaces/umani/Rime-Input-Method-Engine":{content:'# ä¸­å·éŸ»è¼¸å…¥æ³•å¼•æ“\n\næˆ‘æ˜¯ç”¨æ³¨éŸ³è¼¸å…¥æ³•ï¼Œä¸€ç›´ä»¥ä¾†éƒ½ä½¿ç”¨ MacOS Big Sur ä¸­çš„å…§å»ºçš„æ³¨éŸ³è¼¸å…¥æ³•ï¼Œä½†çœŸçš„è¶Šä¾†è¶Šæ…¢ï¼Œæ…¢åˆ°çœŸçš„å—ä¸äº†äº†...\n\næ‰¾å€‹æ™‚é–“æ”¶å°‹ä¸¦ä¸”å˜—è©¦äº†ä¸€ä¸‹å…¶ä»–æ”¯æ´ MacOS ä¸­çš„æ³¨éŸ³è¼¸å…¥æ³•, åŒ…å«äº†\n\n- [Yahooè¼¸å…¥æ³•](https://github.com/zonble/ykk_installer)\n- [å°éº¥è¼¸å…¥æ³•](https://mcbopomofo.openvanilla.org/)\n- [è¶…æ³¨éŸ³](http://www.superkbd.com/)\n- [ä¸­å·éŸ»è¼¸å…¥æ³•å¼•æ“](https://rime.im/)\n\nå…¶ä¸­**ä¸­å·éŸ»è¼¸å…¥æ³•å¼•æ“**æœ€å¸å¼•æˆ‘çš„çœ¼çƒï¼Œæ•ˆèƒ½å¥½ï¼Œè¨­å®šæ–¹å¼å¾ˆå·¥ç¨‹å¸«(èª¤)ï¼Œæœ¬èº«é–‹æºï¼ŒGitHub ä¸Šä¸€ç›´éƒ½æœ‰æŒçºŒçš„ç¶­è­·æ›´æ–°ç­‰ç­‰ï¼Œéƒ½å¾ˆç¬¦åˆæˆ‘çš„å£å‘³ï¼\n\nå› æ­¤æ­¤ç¯‡ç¨å¾®è¨˜éŒ„ä¸€ä¸‹å®‰è£è·Ÿé…ç½®æ–¹å¼ï¼Œæä¾›æ—¥å¾Œ OS é‡è£å¾Œçš„åƒè€ƒ\n\n## Install\n\nå¯ä»¥å¾å®˜æ–¹ [Downlaod Page](https://rime.im/download/) ä¸‹è¼‰å®‰è£æª”ï¼Œæˆ–ä½¿ç”¨ [Homebrew](https://brew.sh/) ä¾†å®‰è£:\n\n```sh\nbrew install --cask squirrel\n```\n\n## Setup\n\nå®‰è£å¥½å¾Œ, æ‰€æœ‰ç›¸é—œçš„é…ç½®å¯ä»¥å¾ menu ä¸­çš„è¼¸å…¥æ³•ä¸­é€²å…¥, æ›´æ”¹é…ç½®å¾Œéƒ½éœ€è¦é‡æ–°é»æ“Š **Deploy** å§‹å¾—ç”Ÿæ•ˆ\n\n![](/spaces/umani/attachments/rime-input.png)\n\n### Custom Settings\n\né»é¸ **Settings**, æœƒé–‹å•Ÿ Rime çš„ç›®éŒ„, MacOS é è¨­ç›®éŒ„åœ¨:\n\n```sh\n/Users/{username}/Library/Rime\n```\n\nåœ¨è©²éŒ„ä¸­å»ºç«‹ `default.custom.yaml` æª”æ¡ˆ\n\n```sh\ntouch /Users/{username}/Library/Rime/default.custom.yaml\n```\n\n`default.custom.yaml` æ˜¯ç”¨ä¾†è¦†è“‹å…¨åŸŸæ€§çš„é…ç½®æª”æ¡ˆ, ä½ åªéœ€è¦æŠŠæƒ³è¦èª¿æ•´çš„è¨­å®šé …ç›®æ”¾åœ¨ `patch` ä¸‹, å¦‚:\n\n```yaml\npatch:\n  some_setting: "some value"\n  yet:\n    another_setting: 0\n```\n\nå¯ä»¥èª¿æ•´çš„è¨­å®šé …ç›®å¯åƒè€ƒå®˜æ–¹çš„[CustomizationGuide](https://github.com/rime/home/wiki/CustomizationGuide) æˆ–[å®Œæ•´çš„æ³¨éŸ³è¼¸å…¥ Schema](https://gist.github.com/lotem/3913578)\n\n### My Settings\n\nä»¥ä¸‹åˆ—å‡ºæˆ‘ç›®å‰çš„é…ç½®:\n\n```yaml\n# default.custom.yaml\n\npatch:\n  menu:\n    page_size: 7  # æ¯é é¡¯ç¤ºçš„é¸é …æ•¸ç›®\n  key_binder:\n    bindings:\n      # åœ¨ Rime ä¸­åŠ å…¥"["å’Œ"]"ç¿»é æŒ‰é”®ç»‘å®š\n      - { when: paging, accept: bracketleft, send: Page_Up }\n      - { when: has_menu, accept: bracketright, send: Page_Down }\n  schema_list:  # æŒ‰ F4 é¸æ“‡è¼¸å…¥æ³•å‡ºç¾çš„é …ç›®\n    - schema: bopomofo  # æ³¨éŸ³, å› ç‚ºæˆ‘åªç”¨æ³¨éŸ³å›‰\n```\n\n\u003e schema_list å¯åƒè€ƒ https://gist.github.com/mitnk/3401421\n\næˆ‘å¤§æ¦‚åªè¨­äº†é€™äº›ï¼Œæ²’æœ‰ä½¿ç”¨ [Sync](https://github.com/rime/home/wiki/UserGuide#%E5%90%8C%E6%AD%A5%E7%94%A8%E6%88%B6%E8%B3%87%E6%96%99) ç­‰åŠŸèƒ½, å‰©é¤˜çš„é…ç½®éƒ½æ˜¯ä½¿ç”¨é è¨­å°±å¾ˆå¥½ç”¨å›‰!\n\n## Uninstall\nåƒè€ƒå®˜æ–¹ [FAQ](https://github.com/rime/home/wiki/FAQ#%E5%A6%82%E4%BD%95%E5%8D%B8%E8%BC%89%E9%BC%A0%E9%AC%9A%E7%AE%A1squirrel)\n## Reference\n- [GitHub](https://github.com/rime)\n- [Wiki](https://github.com/rime/home/wiki)\n	- [UserGuide](https://github.com/rime/home/wiki/UserGuide)\n	- [CustomizationGuide](https://github.com/rime/home/wiki/CustomizationGuide)\n- [é–‹æºå¥½ç”¨çš„è¼¸å…¥æ³•--é¼ é¬šç®¡](https://intergroup.gitbook.io/080/yuan-hao-yong-de-ru-fa-shu-guan)',title:"Rime Input Method Engine"},"/spaces/umani/cdc":{content:"Change Data Capture ç¸®å¯« CDC, æ„æŒ‡å¦‚ä½•ç™¼ç¾ä¸¦æ•ç²è³‡æ–™æº (Source Database) çš„è³‡æ–™è®ŠåŒ–, å¸¸è¦‹çš„è§£æ±ºæ–¹æ¡ˆæœ‰:\n\n- Log-based\n- ETL\n- Trigger-based\n\n## Log-based\n\n![](/spaces/umani/attachments/cdc-log-based.png)\n\né€éå·¥å…·ç›£æ§ Source Database çš„ Transaction Log, å¸¸è¦‹çš„å·¥å…·å¦‚: [Debezium](https://debezium.io/)\n\n### Challenges\n1. éœ€é…åˆæ‰€æŒ‘é¸çš„ Tool çš„ç›¸é—œè¨­å®š, å¦‚ Debezium å®˜æ–¹[æ‰€è¦æ±‚çš„æ¬Šé™](https://debezium.io/documentation/reference/connectors/oracle.html#setting-up-oracle) å¯èƒ½å®¢æˆ¶çš„ DBA æœƒèªçˆ²éå¤§\n2. éƒ¨åˆ† Database éœ€è¦é…åˆè¨­å®š, å¦‚ Oracle éœ€è¦å•“ç”¨ Archive Log, è‹¥å®¢æˆ¶æœ¬èº«æ²’ä½¿ç”¨é€™äº›åŠŸèƒ½, å‰‡é–‹å•“å¾Œå°å®¢æˆ¶ç’°å¢ƒçš„ç©©å®šåº¦æ˜¯ä¸€å€‹æŒ‘æˆ°\n\n## ETL\n\n![](/spaces/umani/attachments/cdc-etl.png)\n\né€éç´„å®šå¥½çš„ Audit Columns (å¦‚ `createdDate`, `lastModifiedDate`) ä¾†é€²è¡Œ ETL\n\nå¯¦ä½œä¸€å€‹ CDC App, å®šæœŸä»¥ Audit Columns ä½œçˆ²åˆ¤æ–·ä¾æ“šä¾†æŸ¥è©¢ Source Database, å°‡æ•æ‰åˆ°çš„ç•°å‹•è³‡æ–™åŒæ­¥åˆ° Target Database ä¸­\n\n### Challenges\n1. è¦è¢«ç›£æ§çš„ Table éƒ½å¿…é ˆè¦æœ‰ Audit Columns \n2. äººçˆ²æ“ä½œ DB ä¹Ÿå¿…é ˆéƒ½è¦æ›´æ–° Audit Columns \n3. è¦–æ¥­å‹™éœ€æ±‚, éœ€è¦æœ‰é¡å¤–çš„ Source Database åˆªé™¤è³‡æ–™çš„è™•ç†æµç¨‹\n4. Source Database æœƒæœ‰é¡å¤–çš„æ•ˆèƒ½æ¶ˆè€—çµ¦ CDC App å®šæœŸçš„æŸ¥è©¢\n5. CDC App å®šæœŸæŸ¥è©¢çš„é€±æœŸæ±ºå®šäº† Target Database çš„è³‡æ–™æ™‚é–“å·®\n\n## Trigger-based\n\n![](/spaces/umani/attachments/cdc-trigger-based.png)\n\né€éåœ¨ Source Database ä¸­è¨­å®š Database Trigger ä¾†ç›£æ§ç›®æ¨™ Table\n\nç•¶ç›®æ¨™ Table è³‡æ–™ç™¼ç”Ÿç•°å‹•æ™‚æœƒè§¸ç™¼ Trigger, Trigger çš„å…§å®¹æ˜¯å°‡è³‡æ–™ç•°å‹•å…§å®¹å¯«å…¥ Shadow Table\n\nå¯¦ä½œä¸€å€‹ CDC App, å®šæœŸæŸ¥è©¢ Shadow Table å°‡ç™¼ç¾çš„ç•°å‹•å…§å®¹åŒæ­¥åˆ° Target Database ä¸­\n\n\n### Challenges\n1. éœ€è¦ Database æœ‰æ”¯æ´ Trigger\n2. ç›£æ§ Table è·Ÿ Shadow Table å»ºè­°åœ¨åŒä¸€å€‹ Database Instance\n3. Source Database æœƒæœ‰é¡å¤–çš„æ•ˆèƒ½æ¶ˆè€—çµ¦ Trigger\n4. CDC App å®šæœŸæŸ¥è©¢çš„é€±æœŸæ±ºå®šäº† Target Database çš„è³‡æ–™æ™‚é–“å·®",title:"Change Data Capture"},"/spaces/umani/json-schema":{content:"# JSON Schema\n\nJSON Schema æ˜¯ä¸€ç¨®å®£å‘Šå¼èªè¨€, å¯ä»¥å®šç¾©ä¸¦é©—è­‰ JSON ç‰©ä»¶çš„çµæ§‹, Java å¥—ä»¶å¯åƒè€ƒ [everit-org/json-schema](https://github.com/everit-org/json-schema.git)\n\n## Reference\n\n- [Introduction to JSON Schema in Java](https://www.baeldung.com/introduction-to-json-schema-in-java)",title:"Untitled Page"},"/spaces/umani/optimistic-concurrency-control":{content:"# Optimistic Concurrency Control\n\næ¨‚è§€é– (ç°¡ç¨± OCC), æ˜¯ä¸€ç¨®ä¸¦è¡Œæ§åˆ¶çš„æ–¹æ³•ã€‚\n\nç°¡å–®çš„å¯¦ä½œæ–¹å¼å°±æ˜¯, æ‰¾è³‡æ–™å…¶ä¸­ä¸€å€‹æ¬„ä½ä½œç‚ºåˆ¤æ–·æ¢ä»¶, å¦‚ `@Version` æˆ–æ˜¯ `æœ€å¾Œä¿®æ”¹æ™‚é–“`, åœ¨è³‡æ–™ç•°å‹•æ™‚å°‡è©²æ¬„ä½ä¸€ä½µä½œç‚º Where æ¢ä»¶å»åŸ·è¡Œ, è‹¥ `update row = 0` å³ä»£è¡¨è³‡æ–™å·²éæœŸã€‚\n\nå¦‚æ­¤æˆ‘å€‘å°±å¯ä»¥ç¢ºä¿åŒæ™‚å¤šå€‹ Transaction é‡å°åŒä¸€ç­†è³‡æ–™ç•°å‹•çš„é †åºæ€§, ä¸æœƒç™¼ç”Ÿå¾Œè“‹å‰ç­‰ç‹€æ³ã€‚",title:"Untitled Page"},"/spaces/umani/single-source-of-truth":{content:"# Single Source of Truth\n\näº‹å¯¦çš„å”¯ä¸€ä¾†æº, åœ¨ç³»çµ±è¨­è¨ˆèˆ‡ç†è«–ä¸­, äº‹å¯¦çš„å”¯ä¸€ä¾†æºæ˜¯æ§‹å»ºä¿¡æ¯æ¨¡å‹å’Œé—œè¯çš„æ•¸æ“šæ¨¡å¼çš„å¯¦è¸, ä¸€å€‹ Application æ‡‰è©²åªå¼•ç”¨æˆ–åƒè€ƒè‡ªä¸€å€‹ä¸»è¦çš„äº‹å¯¦çš„è³‡æ–™æº",title:"Untitled Page"},"/templates/post":{content:"",title:"{{title}}"}};for(const[b,a]of Object.entries(scrapedContent))contentIndex.add({id:b,title:a.title,content:removeMarkdown(a.content)});const highlight=(i,j)=>{const a=20,k=j.split(/\s+/).filter(a=>a!==""),b=i.split(/\s+/).filter(a=>a!==""),f=a=>k.some(b=>a.toLowerCase().startsWith(b.toLowerCase())),d=b.map(f);let e=0,g=0;for(let b=0;b<Math.max(d.length-a,0);b++){const f=d.slice(b,b+a),c=f.reduce((a,b)=>a+b,0);c>=e&&(e=c,g=b)}const c=Math.max(g-a,0),h=Math.min(c+2*a,b.length),l=b.slice(c,h).map(a=>{return f(a)?`<span class="search-highlight">${a}</span>`:a}).join(" ").replaceAll('</span> <span class="search-highlight">'," ");return`${c===0?"":"..."}${l}${h===b.length?"":"..."}`},resultToHTML=({url:b,title:c,content:d,term:a})=>{const e=removeMarkdown(d),f=highlight(c,a),g=highlight(e,a);return`<button class="result-card" id="${b}">
        <h3>${f}</h3>
        <p>${g}</p>
    </button>`},redir=(a,b)=>{window.location.href="https://shihyuho.github.io/pkm/"+`${a}#:~:text=${encodeURIComponent(b)}`},fetch=a=>({id:a,url:a,title:scrapedContent[a].title,content:scrapedContent[a].content}),source=document.getElementById('search-bar'),results=document.getElementById("results-container");let term;source.addEventListener("keyup",a=>{if(a.key==="Enter"){const a=document.getElementsByClassName("result-card")[0];redir(a.id,term)}}),source.addEventListener('input',a=>{term=a.target.value,contentIndex.search(term,[{field:"content",limit:10,suggest:!0},{field:"title",limit:5}]).then(c=>{const a=b=>{const a=c.filter(a=>a.field===b);return a.length===0?[]:[...a[0].result]},d=[...a('title'),...a('content')],b=d.map(fetch);if(b.length===0)results.innerHTML=`<div class="result-card">
                    <p>No results.</p>
                </div>`;else{results.innerHTML=b.map(a=>resultToHTML({...a,term})).join("\n");const a=document.getElementsByClassName("result-card");[...a].forEach(a=>{a.onclick=()=>redir(a.id,term)})}})});const searchContainer=document.getElementById("search-container");function openSearch(){searchContainer.style.display==="none"||searchContainer.style.display===""?(source.value="",results.innerHTML="",searchContainer.style.display="block",source.focus()):searchContainer.style.display="none"}function closeSearch(){searchContainer.style.display="none"}document.addEventListener('keydown',a=>{a.key==="/"&&(a.preventDefault(),openSearch()),a.key==="Escape"&&(a.preventDefault(),closeSearch())}),window.addEventListener('DOMContentLoaded',()=>{const a=document.getElementById("search-icon");a.addEventListener('click',a=>{openSearch()}),a.addEventListener('keydown',a=>{openSearch()}),searchContainer.addEventListener('click',a=>{closeSearch()}),document.getElementById("search-space").addEventListener('click',a=>{a.stopPropagation()})})</script><div class=singlePage><header><svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><aside class=mainTOC><h3>Table of Contents</h3><nav id=TableOfContents><ol><li><a href=#interaction-with-other-aggregate>Interaction with other aggregate</a></li><li><a href=#aggregate-root>Aggregate Root</a></li></ol></nav></aside><h1 id=aggregate>Aggregate</h1><ul><li>åŒ…å«äº† Entities è·Ÿ ValueObject</li><li>è² è²¬æ‰€æœ‰ Entites è·Ÿ ValueObject çš„
<a href=../../../spaces/ddd/invariants rel=noopener>Invariants</a></li><li>Aggregate å³ Transaction Boundary,</li><li>å»ºè­°ä¸€å€‹ Aggregate æ‡‰è©²åªå°æ‡‰ä¸€å€‹
<a href=../../../spaces/ddd/repository rel=noopener>Repository</a>
, ä¸¦åœ¨è©² Repository ç¶ä¸Š Transaction</li><li>ä½¿ç”¨åè©, ä¸è¦å‡ºç¾å‹•è©</li><li>é¿å…ä½¿ç”¨ä¸ç²¾ç¢ºçš„åè©</li></ul><h2 id=interaction-with-other-aggregate>Interaction with other aggregate</h2><p>å¦‚æœæ˜¯è¦å”èª¿èª¿åº¦å…©å€‹ä¸åŒçš„èšåˆçš„æƒ…æ³ä¸‹ï¼Œä¸€èˆ¬æˆ‘å€‘æœƒè€ƒæ…®æ˜¯ä»¥ Application Service ä¾†è™•ç†ï¼Œæˆ–è€…æ˜¯é€šéæ´¾ç™¼é ˜åŸŸäº‹ä»¶å»è·Ÿå¦ä¸€å€‹èšåˆåšäº¤äº’ï¼Œ domain service é‚„æ˜¯æ¯”è¼ƒéš¸å±¬æ–¼è©²èšåˆç›¸é—œçš„æ¥­å‹™è©±é¡Œçš„äº‹ç‰©å±…å¤šã€‚</p><h2 id=aggregate-root>Aggregate Root</h2><p>æŒ‘é¸ Aggregate ä¸­çš„å…¶ä¸­ä¸€å€‹ Entity æœ€ç‚º Root (æ ¹), åªæœ‰ Aggregate Root æŒæœ‰æ•´é«”çš„é ˜åŸŸäº‹ä»¶ (Domain Event)ï¼Œä¸¦ä¸”æ±ºå®šä½•æ™‚ç™¼å‡ºå»ã€‚</p><blockquote><p>ä¸€å€‹ Aggregate Rootæ“æœ‰ domain event list å°±å¥½åƒæ˜¯ä¸€å€‹æ±½è»Šä¿®ç†å“¡éš¨èº«æ”œå¸¶èºçµ²èµ·å­ä¸€æ¨£æ˜¯å¾ˆè‡ªç„¶çš„äº‹æƒ…</p></blockquote></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=../../../spaces/ddd/invariants>/spaces/ddd/invariants</a></li><li><a href=../../../spaces/ddd/strategic-design>/spaces/ddd/strategic-design</a></li><li><a href=../../../spaces/event-sourcing/projection>/spaces/event-sourcing/projection</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script>const index={backlinks:{"/+home":[{source:"/",target:"/+home",text:"enter the forest"}],"/moc/ddd-moc":[{source:"/+home",target:"/moc/ddd-moc",text:"DDD MOC"},{source:"/moc/event-sourcing-moc",target:"/moc/ddd-moc",text:"DDD"},{source:"/spaces/event-sourcing/general-understanding",target:"/moc/ddd-moc",text:"DDD"}],"/moc/event-sourcing-moc":[{source:"/+home",target:"/moc/event-sourcing-moc",text:"Event Sourcing MOC"}],"/moc/kubernetes-moc":[{source:"/+home",target:"/moc/kubernetes-moc",text:"Kubernetes MOC"}],"/moc/spring-moc":[{source:"/+home",target:"/moc/spring-moc",text:"Spring MOC"}],"/moc/umani-moc":[{source:"/+home",target:"/moc/umani-moc",text:"Umani MOC"}],"/notes/config":[{source:"/notes/hosting",target:"/notes/config",text:"Customizing Quartz"},{source:"/notes/troubleshooting",target:"/notes/config",text:"customization guide"}],"/notes/editing":[{source:"/notes/troubleshooting",target:"/notes/editing",text:"local editing"}],"/notes/hosting":[{source:"/notes/troubleshooting",target:"/notes/hosting",text:"the hosting guide"},{source:"/notes/troubleshooting",target:"/notes/hosting",text:"hosting"}],"/notes/ignore-notes":[{source:"/notes/troubleshooting",target:"/notes/ignore-notes",text:"excluding pages from being published"}],"/notes/obsidian":[{source:"/notes/troubleshooting",target:"/notes/obsidian",text:"Obsidian"}],"/notes/troubleshooting":[{source:"/notes/hosting",target:"/notes/troubleshooting",text:"FAQ and Troubleshooting guide"}],"/private/projects/projects-moc":[{source:"/+home",target:"/private/projects/projects-moc",text:"Projects MOC"}],"/spaces/ddd/aggregate":[{source:"/spaces/ddd/invariants",target:"/spaces/ddd/aggregate",text:"Aggregate"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/aggregate",text:"Aggregate"},{source:"/spaces/event-sourcing/projection",target:"/spaces/ddd/aggregate",text:"Aggregate"}],"/spaces/ddd/aggregate.md":[{source:"/spaces/ddd/invariants",target:"/spaces/ddd/aggregate.md",text:"Aggregate Root"}],"/spaces/ddd/bounded-context":[{source:"/moc/event-sourcing-moc",target:"/spaces/ddd/bounded-context",text:"Bounded Context"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/bounded-context",text:"Bounded Context"}],"/spaces/ddd/command":[{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/command",text:"Command"}],"/spaces/ddd/domain-modeling":[{source:"/moc/event-sourcing-moc",target:"/spaces/ddd/domain-modeling",text:"Domain"},{source:"/spaces/ddd/tactical-design",target:"/spaces/ddd/domain-modeling",text:"Domain Modeling"}],"/spaces/ddd/event":[{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/event",text:"Event"},{source:"/spaces/event-sourcing/projection",target:"/spaces/ddd/event",text:"event"}],"/spaces/ddd/example-mapping":[{source:"/spaces/ddd/tactical-design",target:"/spaces/ddd/example-mapping",text:"Example Mapping"}],"/spaces/ddd/invariants":[{source:"/spaces/ddd/aggregate",target:"/spaces/ddd/invariants",text:"Invariants"},{source:"/spaces/event-sourcing/aggregate-business-invariants",target:"/spaces/ddd/invariants",text:"Invariants"}],"/spaces/ddd/repository":[{source:"/spaces/ddd/aggregate",target:"/spaces/ddd/repository",text:"Repository"}],"/spaces/ddd/strategic-design":[{source:"/moc/ddd-moc",target:"/spaces/ddd/strategic-design",text:"Strategic Design"}],"/spaces/ddd/subdomain":[{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/subdomain",text:"Subdomain"}],"/spaces/ddd/tactical-design":[{source:"/moc/ddd-moc",target:"/spaces/ddd/tactical-design",text:"Tactical Design"}],"/spaces/event-sourcing/aggregate-business-invariants":[{source:"/spaces/event-sourcing/guarantee-correctness-when-writing",target:"/spaces/event-sourcing/aggregate-business-invariants",text:"Aggregate Business Invariants"}],"/spaces/event-sourcing/copy-transform":[{source:"/spaces/event-sourcing/create-a-snapshot-of-the-stream",target:"/spaces/event-sourcing/copy-transform",text:"Copy Transform"},{source:"/spaces/event-sourcing/remodel-domain",target:"/spaces/event-sourcing/copy-transform",text:"Copy Transform"}],"/spaces/event-sourcing/create-a-snapshot-of-the-stream":[{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/create-a-snapshot-of-the-stream",text:"Create a Snapshot of the Stream"}],"/spaces/event-sourcing/dealing-with-errors":[{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/dealing-with-errors",text:"Dealing with Errors"}],"/spaces/event-sourcing/double-write":[{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/event-sourcing/double-write",text:"Double Write"}],"/spaces/event-sourcing/general-understanding":[{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/general-understanding",text:"General Understanding"}],"/spaces/event-sourcing/guarantee-correctness-when-writing":[{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/guarantee-correctness-when-writing",text:"Guarantee Correctness when writing"}],"/spaces/event-sourcing/handle-versioning":[{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/handle-versioning",text:"Handle Versioning"}],"/spaces/event-sourcing/manage-transactions-with-database":[{source:"/spaces/event-sourcing/guarantee-correctness-when-writing",target:"/spaces/event-sourcing/manage-transactions-with-database",text:"Manage Transactions With a Database"}],"/spaces/event-sourcing/projection":[{source:"/spaces/event-sourcing/general-understanding",target:"/spaces/event-sourcing/projection",text:"Projection"}],"/spaces/event-sourcing/read-model":[{source:"/spaces/event-sourcing/you-may-not-need-a-read-model",target:"/spaces/event-sourcing/read-model",text:"Read Model"}],"/spaces/event-sourcing/remodel-domain":[{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/remodel-domain",text:"Re-Model Domain"}],"/spaces/event-sourcing/upcaster":[{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/event-sourcing/upcaster",text:"Upcaster"}],"/spaces/event-sourcing/you-may-not-need-a-read-model":[{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/you-may-not-need-a-read-model",text:"You may NOT need a read model"}],"/spaces/kubernetes/assigning-pods":[{source:"/moc/kubernetes-moc",target:"/spaces/kubernetes/assigning-pods",text:"Assigning Pods"}],"/spaces/spring/externalized-configuration":[{source:"/moc/spring-moc",target:"/spaces/spring/externalized-configuration",text:"Externalized Configuration"}],"/spaces/umani/Rime-Input-Method-Engine":[{source:"/moc/umani-moc",target:"/spaces/umani/Rime-Input-Method-Engine",text:"Rime Input Method Engine"}],"/spaces/umani/cdc":[{source:"/moc/umani-moc",target:"/spaces/umani/cdc",text:"Change Data Capture"},{source:"/spaces/event-sourcing/manage-transactions-with-database",target:"/spaces/umani/cdc",text:"CDC"}],"/spaces/umani/json-schema":[{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/umani/json-schema",text:"JSON Schema"}],"/spaces/umani/optimistic-concurrency-control":[{source:"/spaces/event-sourcing/aggregate-business-invariants",target:"/spaces/umani/optimistic-concurrency-control",text:"Optimistic Concurrency Control"}],"/spaces/umani/single-source-of-truth":[{source:"/spaces/event-sourcing/dealing-with-errors",target:"/spaces/umani/single-source-of-truth",text:"Single Source of Truth"}]},links:{"/":[{source:"/",target:"/+home",text:"enter the forest"}],"/+home":[{source:"/+home",target:"/moc/spring-moc",text:"Spring MOC"},{source:"/+home",target:"/private/projects/projects-moc",text:"Projects MOC"},{source:"/+home",target:"/moc/umani-moc",text:"Umani MOC"},{source:"/+home",target:"/moc/ddd-moc",text:"DDD MOC"},{source:"/+home",target:"/moc/event-sourcing-moc",text:"Event Sourcing MOC"},{source:"/+home",target:"/moc/kubernetes-moc",text:"Kubernetes MOC"}],"/moc/ddd-moc":[{source:"/moc/ddd-moc",target:"/spaces/ddd/tactical-design",text:"Tactical Design"},{source:"/moc/ddd-moc",target:"/spaces/ddd/strategic-design",text:"Strategic Design"}],"/moc/event-sourcing-moc":[{source:"/moc/event-sourcing-moc",target:"/spaces/ddd/domain-modeling",text:"Domain"},{source:"/moc/event-sourcing-moc",target:"/spaces/ddd/bounded-context",text:"Bounded Context"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/general-understanding",text:"General Understanding"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/you-may-not-need-a-read-model",text:"You may NOT need a read model"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/remodel-domain",text:"Re-Model Domain"},{source:"/moc/event-sourcing-moc",target:"/moc/ddd-moc",text:"DDD"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/handle-versioning",text:"Handle Versioning"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/create-a-snapshot-of-the-stream",text:"Create a Snapshot of the Stream"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/dealing-with-errors",text:"Dealing with Errors"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/guarantee-correctness-when-writing",text:"Guarantee Correctness when writing"}],"/moc/kubernetes-moc":[{source:"/moc/kubernetes-moc",target:"/spaces/kubernetes/assigning-pods",text:"Assigning Pods"}],"/moc/spring-moc":[{source:"/moc/spring-moc",target:"/spaces/spring/externalized-configuration",text:"Externalized Configuration"}],"/moc/umani-moc":[{source:"/moc/umani-moc",target:"/spaces/umani/Rime-Input-Method-Engine",text:"Rime Input Method Engine"},{source:"/moc/umani-moc",target:"/spaces/umani/cdc",text:"Change Data Capture"}],"/notes/hosting":[{source:"/notes/hosting",target:"/notes/config",text:"Customizing Quartz"},{source:"/notes/hosting",target:"/notes/troubleshooting",text:"FAQ and Troubleshooting guide"}],"/notes/troubleshooting":[{source:"/notes/troubleshooting",target:"/notes/ignore-notes",text:"excluding pages from being published"},{source:"/notes/troubleshooting",target:"/notes/obsidian",text:"Obsidian"},{source:"/notes/troubleshooting",target:"/notes/hosting",text:"the hosting guide"},{source:"/notes/troubleshooting",target:"/notes/editing",text:"local editing"},{source:"/notes/troubleshooting",target:"/notes/hosting",text:"hosting"},{source:"/notes/troubleshooting",target:"/notes/config",text:"customization guide"}],"/spaces/ddd/aggregate":[{source:"/spaces/ddd/aggregate",target:"/spaces/ddd/invariants",text:"Invariants"},{source:"/spaces/ddd/aggregate",target:"/spaces/ddd/repository",text:"Repository"}],"/spaces/ddd/invariants":[{source:"/spaces/ddd/invariants",target:"/spaces/ddd/aggregate",text:"Aggregate"},{source:"/spaces/ddd/invariants",target:"/spaces/ddd/aggregate.md",text:"Aggregate Root"}],"/spaces/ddd/strategic-design":[{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/aggregate",text:"Aggregate"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/bounded-context",text:"Bounded Context"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/subdomain",text:"Subdomain"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/event",text:"Event"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/command",text:"Command"}],"/spaces/ddd/tactical-design":[{source:"/spaces/ddd/tactical-design",target:"/spaces/ddd/example-mapping",text:"Example Mapping"},{source:"/spaces/ddd/tactical-design",target:"/spaces/ddd/domain-modeling",text:"Domain Modeling"}],"/spaces/event-sourcing/aggregate-business-invariants":[{source:"/spaces/event-sourcing/aggregate-business-invariants",target:"/spaces/ddd/invariants",text:"Invariants"},{source:"/spaces/event-sourcing/aggregate-business-invariants",target:"/spaces/umani/optimistic-concurrency-control",text:"Optimistic Concurrency Control"}],"/spaces/event-sourcing/create-a-snapshot-of-the-stream":[{source:"/spaces/event-sourcing/create-a-snapshot-of-the-stream",target:"/spaces/event-sourcing/copy-transform",text:"Copy Transform"}],"/spaces/event-sourcing/dealing-with-errors":[{source:"/spaces/event-sourcing/dealing-with-errors",target:"/spaces/umani/single-source-of-truth",text:"Single Source of Truth"}],"/spaces/event-sourcing/general-understanding":[{source:"/spaces/event-sourcing/general-understanding",target:"/moc/ddd-moc",text:"DDD"},{source:"/spaces/event-sourcing/general-understanding",target:"/spaces/event-sourcing/projection",text:"Projection"}],"/spaces/event-sourcing/guarantee-correctness-when-writing":[{source:"/spaces/event-sourcing/guarantee-correctness-when-writing",target:"/spaces/event-sourcing/manage-transactions-with-database",text:"Manage Transactions With a Database"},{source:"/spaces/event-sourcing/guarantee-correctness-when-writing",target:"/spaces/event-sourcing/aggregate-business-invariants",text:"Aggregate Business Invariants"}],"/spaces/event-sourcing/handle-versioning":[{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/event-sourcing/upcaster",text:"Upcaster"},{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/umani/json-schema",text:"JSON Schema"},{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/event-sourcing/double-write",text:"Double Write"}],"/spaces/event-sourcing/manage-transactions-with-database":[{source:"/spaces/event-sourcing/manage-transactions-with-database",target:"/spaces/umani/cdc",text:"CDC"}],"/spaces/event-sourcing/projection":[{source:"/spaces/event-sourcing/projection",target:"/spaces/ddd/event",text:"event"},{source:"/spaces/event-sourcing/projection",target:"/spaces/ddd/aggregate",text:"Aggregate"}],"/spaces/event-sourcing/remodel-domain":[{source:"/spaces/event-sourcing/remodel-domain",target:"/spaces/event-sourcing/copy-transform",text:"Copy Transform"}],"/spaces/event-sourcing/you-may-not-need-a-read-model":[{source:"/spaces/event-sourcing/you-may-not-need-a-read-model",target:"/spaces/event-sourcing/read-model",text:"Read Model"}]}},links=[{source:"/+home",target:"/moc/spring-moc",text:"Spring MOC"},{source:"/+home",target:"/private/projects/projects-moc",text:"Projects MOC"},{source:"/+home",target:"/moc/umani-moc",text:"Umani MOC"},{source:"/+home",target:"/moc/ddd-moc",text:"DDD MOC"},{source:"/+home",target:"/moc/event-sourcing-moc",text:"Event Sourcing MOC"},{source:"/+home",target:"/moc/kubernetes-moc",text:"Kubernetes MOC"},{source:"/",target:"/+home",text:"enter the forest"},{source:"/moc/ddd-moc",target:"/spaces/ddd/tactical-design",text:"Tactical Design"},{source:"/moc/ddd-moc",target:"/spaces/ddd/strategic-design",text:"Strategic Design"},{source:"/moc/event-sourcing-moc",target:"/spaces/ddd/domain-modeling",text:"Domain"},{source:"/moc/event-sourcing-moc",target:"/spaces/ddd/bounded-context",text:"Bounded Context"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/general-understanding",text:"General Understanding"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/you-may-not-need-a-read-model",text:"You may NOT need a read model"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/remodel-domain",text:"Re-Model Domain"},{source:"/moc/event-sourcing-moc",target:"/moc/ddd-moc",text:"DDD"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/handle-versioning",text:"Handle Versioning"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/create-a-snapshot-of-the-stream",text:"Create a Snapshot of the Stream"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/dealing-with-errors",text:"Dealing with Errors"},{source:"/moc/event-sourcing-moc",target:"/spaces/event-sourcing/guarantee-correctness-when-writing",text:"Guarantee Correctness when writing"},{source:"/moc/kubernetes-moc",target:"/spaces/kubernetes/assigning-pods",text:"Assigning Pods"},{source:"/moc/spring-moc",target:"/spaces/spring/externalized-configuration",text:"Externalized Configuration"},{source:"/moc/umani-moc",target:"/spaces/umani/Rime-Input-Method-Engine",text:"Rime Input Method Engine"},{source:"/moc/umani-moc",target:"/spaces/umani/cdc",text:"Change Data Capture"},{source:"/notes/hosting",target:"/notes/config",text:"Customizing Quartz"},{source:"/notes/hosting",target:"/notes/troubleshooting",text:"FAQ and Troubleshooting guide"},{source:"/notes/troubleshooting",target:"/notes/ignore-notes",text:"excluding pages from being published"},{source:"/notes/troubleshooting",target:"/notes/obsidian",text:"Obsidian"},{source:"/notes/troubleshooting",target:"/notes/hosting",text:"the hosting guide"},{source:"/notes/troubleshooting",target:"/notes/editing",text:"local editing"},{source:"/notes/troubleshooting",target:"/notes/hosting",text:"hosting"},{source:"/notes/troubleshooting",target:"/notes/config",text:"customization guide"},{source:"/spaces/ddd/aggregate",target:"/spaces/ddd/invariants",text:"Invariants"},{source:"/spaces/ddd/aggregate",target:"/spaces/ddd/repository",text:"Repository"},{source:"/spaces/ddd/invariants",target:"/spaces/ddd/aggregate",text:"Aggregate"},{source:"/spaces/ddd/invariants",target:"/spaces/ddd/aggregate.md",text:"Aggregate Root"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/aggregate",text:"Aggregate"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/bounded-context",text:"Bounded Context"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/subdomain",text:"Subdomain"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/event",text:"Event"},{source:"/spaces/ddd/strategic-design",target:"/spaces/ddd/command",text:"Command"},{source:"/spaces/ddd/tactical-design",target:"/spaces/ddd/example-mapping",text:"Example Mapping"},{source:"/spaces/ddd/tactical-design",target:"/spaces/ddd/domain-modeling",text:"Domain Modeling"},{source:"/spaces/event-sourcing/aggregate-business-invariants",target:"/spaces/ddd/invariants",text:"Invariants"},{source:"/spaces/event-sourcing/aggregate-business-invariants",target:"/spaces/umani/optimistic-concurrency-control",text:"Optimistic Concurrency Control"},{source:"/spaces/event-sourcing/create-a-snapshot-of-the-stream",target:"/spaces/event-sourcing/copy-transform",text:"Copy Transform"},{source:"/spaces/event-sourcing/dealing-with-errors",target:"/spaces/umani/single-source-of-truth",text:"Single Source of Truth"},{source:"/spaces/event-sourcing/general-understanding",target:"/moc/ddd-moc",text:"DDD"},{source:"/spaces/event-sourcing/general-understanding",target:"/spaces/event-sourcing/projection",text:"Projection"},{source:"/spaces/event-sourcing/guarantee-correctness-when-writing",target:"/spaces/event-sourcing/manage-transactions-with-database",text:"Manage Transactions With a Database"},{source:"/spaces/event-sourcing/guarantee-correctness-when-writing",target:"/spaces/event-sourcing/aggregate-business-invariants",text:"Aggregate Business Invariants"},{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/event-sourcing/upcaster",text:"Upcaster"},{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/umani/json-schema",text:"JSON Schema"},{source:"/spaces/event-sourcing/handle-versioning",target:"/spaces/event-sourcing/double-write",text:"Double Write"},{source:"/spaces/event-sourcing/manage-transactions-with-database",target:"/spaces/umani/cdc",text:"CDC"},{source:"/spaces/event-sourcing/projection",target:"/spaces/ddd/event",text:"event"},{source:"/spaces/event-sourcing/projection",target:"/spaces/ddd/aggregate",text:"Aggregate"},{source:"/spaces/event-sourcing/remodel-domain",target:"/spaces/event-sourcing/copy-transform",text:"Copy Transform"},{source:"/spaces/event-sourcing/you-may-not-need-a-read-model",target:"/spaces/event-sourcing/read-model",text:"Read Model"}],curPage="/spaces/ddd/aggregate",pathColors=[{"/moc":"#4388cc"}],parseIdsFromLinks=a=>[...new Set(a.flatMap(a=>[a.source,a.target]))],data={nodes:parseIdsFromLinks(links).map(a=>({id:a})),links},color=a=>{if(a.id===curPage||a.id==="/"&&curPage==="")return"var(--g-node-active)";for(const b of pathColors){const c=Object.keys(b)[0],d=b[c];if(a.id.startsWith(c))return d}return"var(--g-node)"},drag=c=>{function d(b,a){b.active||c.alphaTarget(1).restart(),a.fx=a.x,a.fy=a.y}function e(a,b){b.fx=a.x,b.fy=a.y}function f(b,a){b.active||c.alphaTarget(0),a.fx=null,a.fy=null}const a=!0,b=()=>{};return d3.drag().on("start",a?d:b).on("drag",a?e:b).on("end",a?f:b)},height=250,width=document.getElementById("graph-container").offsetWidth,simulation=d3.forceSimulation(data.nodes).force("charge",d3.forceManyBody().strength(-20)).force("link",d3.forceLink(data.links).id(a=>a.id)).force("center",d3.forceCenter()),svg=d3.select('#graph-container').append('svg').attr('width',width).attr('height',height).attr("viewBox",[-width/2,-height/2,width,height]),enableLegend=!1;if(enableLegend){const a=[{Current:"var(--g-node-active)"},{Note:"var(--g-node)"},...pathColors];a.forEach((a,b)=>{const c=Object.keys(a)[0],d=a[c];svg.append("circle").attr("cx",-width/2+20).attr("cy",height/2-30*(b+1)).attr("r",6).style("fill",d),svg.append("text").attr("x",-width/2+40).attr("y",height/2-30*(b+1)).text(c).style("font-size","15px").attr("alignment-baseline","middle")})}const link=svg.append("g").selectAll("line").data(data.links).join("line").attr("class","link").attr("stroke","var(--g-link)").attr("stroke-width",2).attr("data-source",a=>a.source.id).attr("data-target",a=>a.target.id),graphNode=svg.append("g").selectAll("g").data(data.nodes).enter().append("g"),node=graphNode.append("circle").attr("class","node").attr("id",a=>a.id).attr("r",a=>{const b=index.links[a.id]?.length||0,c=index.backlinks[a.id]?.length||0;return 3+(b+c)/4}).attr("fill",color).style("cursor","pointer").on("click",(b,a)=>{window.location.href="https://shihyuho.github.io/pkm/"+a.id.replace(" ","-").replace("%20","-")}).on("mouseover",function(f,a){d3.selectAll(".node").transition().duration(100).attr("fill","var(--g-node-inactive)");const c=parseIdsFromLinks([...index.links[a.id]||[],...index.backlinks[a.id]||[]]),d=d3.selectAll(".node").filter(a=>c.includes(a.id)),b=a.id,e=d3.selectAll(".link").filter(a=>a.source.id===b||a.target.id===b);d.transition().duration(200).attr("fill",color),e.transition().duration(200).attr("stroke","var(--g-link-active)"),d3.select(this.parentNode).select("text").raise().transition().duration(200).style("opacity",1)}).on("mouseleave",function(d,b){d3.selectAll(".node").transition().duration(200).attr("fill",color);const a=b.id,c=d3.selectAll(".link").filter(b=>b.source.id===a||b.target.id===a);c.transition().duration(200).attr("stroke","var(--g-link)"),d3.select(this.parentNode).select("text").transition().duration(200).style("opacity",0)}).call(drag(simulation)),labels=graphNode.append("text").attr("dx",12).attr("dy",".35em").text(a=>a.id.replace("%20","-")).style("opacity",0).style("pointer-events","none").call(drag(simulation)),enableZoom=!0;enableZoom&&svg.call(d3.zoom().extent([[0,0],[width,height]]).scaleExtent([.25,4]).on("zoom",({transform:a})=>{link.attr("transform",a),node.attr("transform",a),labels.attr("transform",a)})),simulation.on("tick",()=>{link.attr("x1",a=>a.source.x).attr("y1",a=>a.source.y).attr("x2",a=>a.target.x).attr("y2",a=>a.target.y),node.attr("cx",a=>a.x).attr("cy",a=>a.y),labels.attr("x",a=>a.x).attr("y",a=>a.y)})</script></div></div><div id=contact_buttons><footer><p>Made by Shihyu Ho using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2021</p><a href=../../../>Home</a>
<a href=https://github.com/shihyuho/>GitHub</a><a href=https://www.linkedin.com/in/methodho/>LinkedIn</a><a href=https://www.facebook.com/evermatt/>Facebook</a></footer></div></div></body></html>